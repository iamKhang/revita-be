<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="4719px" preserveAspectRatio="none" style="width:1763px;height:4719px;background:#FFFFFF;" version="1.1" viewBox="0 0 1763 4719" width="1763px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="112.7988"/><rect fill="#FFFFFF" height="295.1055" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="1817.0078"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="4114.8086"/><rect fill="#FFFFFF" height="277.1055" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="171.4199"/><rect fill="#FFFFFF" height="261.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="502.1465"/><rect fill="#FFFFFF" height="346.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="800.252"/><rect fill="#FFFFFF" height="74.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="3485.6426"/><rect fill="#FFFFFF" height="74.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="3909.9453"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="4013.877"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="4401.5586"/><rect fill="#FFFFFF" height="187.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="216.041"/><rect fill="#FFFFFF" height="187.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="546.7676"/><rect fill="#FFFFFF" height="270.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="875.4941"/><rect fill="#FFFFFF" height="227.4844" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="2221.3555"/><rect fill="#FFFFFF" height="129.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="245.3516"/><rect fill="#FFFFFF" height="129.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="576.0781"/><rect fill="#FFFFFF" height="199.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="947.1152"/><rect fill="#FFFFFF" height="198.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="2250.666"/><rect fill="#FFFFFF" height="132.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="1405.7285"/><rect fill="#FFFFFF" height="487.2793" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="1961.5605"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="2635.9688"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="3002.9844"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="3485.6426"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="3909.9453"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="4297.627"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="4562.0664"/><rect fill="#FFFFFF" height="79.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1527" y="3324.7793"/><rect fill="#FFFFFF" height="95.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1527" y="3733.7715"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="1527" y="4356.9375"/><rect fill="none" height="308.416" style="stroke:#000000;stroke-width:1.5;" width="1123" x="50" y="463.5254"/><rect fill="none" height="3587.3301" style="stroke:#000000;stroke-width:1.5;" width="1746" x="10" y="1033.7363"/><rect fill="none" height="2248.4688" style="stroke:#000000;stroke-width:1.5;" width="1726" x="20" y="2365.5977"/><rect fill="none" height="2039.0293" style="stroke:#000000;stroke-width:1.5;" width="1706" x="30" y="2568.0371"/><rect fill="none" height="252.1289" style="stroke:#000000;stroke-width:1.5;" width="707.5" x="631" y="2795.8555"/><rect fill="none" height="178.5078" style="stroke:#000000;stroke-width:1.5;" width="687.5" x="641" y="2862.4766"/><rect fill="none" height="1438.1504" style="stroke:#000000;stroke-width:1.5;" width="1686" x="40" y="3161.916"/><rect fill="none" height="923.582" style="stroke:#000000;stroke-width:1.5;" width="1666" x="50" y="3243.8477"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="96" x2="96" y1="81.4883" y2="4638.0664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="305.5" x2="305.5" y1="81.4883" y2="4638.0664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="478" x2="478" y1="81.4883" y2="4638.0664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="742" x2="742" y1="81.4883" y2="4638.0664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1020" x2="1020" y1="81.4883" y2="4638.0664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1270.5" x2="1270.5" y1="81.4883" y2="4638.0664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1404" x2="1404" y1="81.4883" y2="4638.0664"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1532" x2="1532" y1="81.4883" y2="4638.0664"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="60" y="78.5352">Thu ng&#226;n</text><ellipse cx="96" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M96,21.5 L96,48.5 M83,29.5 L109,29.5 M96,48.5 L83,63.5 M96,48.5 L109,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="60" y="4650.6016">Thu ng&#226;n</text><ellipse cx="96" cy="4662.0547" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M96,4670.0547 L96,4697.0547 M83,4678.0547 L109,4678.0547 M96,4697.0547 L83,4712.0547 M96,4697.0547 L109,4712.0547 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="266.5" y="78.5352">B&#7879;nh nh&#226;n</text><ellipse cx="306" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M306,21.5 L306,48.5 M293,29.5 L319,29.5 M306,48.5 L293,63.5 M306,48.5 L319,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="266.5" y="4650.6016">B&#7879;nh nh&#226;n</text><ellipse cx="306" cy="4662.0547" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M306,4670.0547 L306,4697.0547 M293,4678.0547 L319,4678.0547 M306,4697.0547 L293,4712.0547 M306,4697.0547 L319,4712.0547 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="433" y="78.5352">Thu ng&#226;n UI</text><path d="M457.5,37 L457.5,61 M457.5,49 L474.5,49 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="486.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="433" y="4650.6016">Thu ng&#226;n UI</text><path d="M457.5,4657.5547 L457.5,4681.5547 M457.5,4669.5547 L474.5,4669.5547 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="486.5" cy="4669.5547" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="651" y="78.5352">InvoicePaymentController</text><ellipse cx="742" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="738,37,744,32,742,37,744,42,738,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="651" y="4650.6016">InvoicePaymentController</text><ellipse cx="742" cy="4669.5547" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="738,4657.5547,744,4652.5547,742,4657.5547,744,4662.5547,738,4657.5547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="940" y="78.5352">InvoicePaymentService</text><ellipse cx="1020" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1008" x2="1032" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="940" y="4650.6016">InvoicePaymentService</text><ellipse cx="1020" cy="4669.5547" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1008" x2="1032" y1="4683.5547" y2="4683.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1223.5" y="78.5352">PayOsService</text><ellipse cx="1271" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1259" x2="1283" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1223.5" y="4650.6016">PayOsService</text><ellipse cx="1271" cy="4669.5547" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1259" x2="1283" y1="4683.5547" y2="4683.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1350" y="78.5352">RoutingService</text><ellipse cx="1404" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1392" x2="1416" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1350" y="4650.6016">RoutingService</text><ellipse cx="1404" cy="4669.5547" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1392" x2="1416" y1="4683.5547" y2="4683.5547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1468" y="78.5352">WebSocketService</text><ellipse cx="1532" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1520" x2="1544" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1468" y="4650.6016">WebSocketService</text><ellipse cx="1532" cy="4669.5547" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1520" x2="1544" y1="4683.5547" y2="4683.5547"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="112.7988"/><rect fill="#FFFFFF" height="295.1055" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="1817.0078"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="4114.8086"/><rect fill="#FFFFFF" height="277.1055" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="171.4199"/><rect fill="#FFFFFF" height="261.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="502.1465"/><rect fill="#FFFFFF" height="346.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="800.252"/><rect fill="#FFFFFF" height="74.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="3485.6426"/><rect fill="#FFFFFF" height="74.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="3909.9453"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="4013.877"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="4401.5586"/><rect fill="#FFFFFF" height="187.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="216.041"/><rect fill="#FFFFFF" height="187.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="546.7676"/><rect fill="#FFFFFF" height="270.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="875.4941"/><rect fill="#FFFFFF" height="227.4844" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="2221.3555"/><rect fill="#FFFFFF" height="129.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="245.3516"/><rect fill="#FFFFFF" height="129.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="576.0781"/><rect fill="#FFFFFF" height="199.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="947.1152"/><rect fill="#FFFFFF" height="198.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="2250.666"/><rect fill="#FFFFFF" height="132.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="1405.7285"/><rect fill="#FFFFFF" height="487.2793" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="1961.5605"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="2635.9688"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="3002.9844"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="3485.6426"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="3909.9453"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="4297.627"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1266" y="4562.0664"/><rect fill="#FFFFFF" height="79.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1527" y="3324.7793"/><rect fill="#FFFFFF" height="95.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1527" y="3733.7715"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="1527" y="4356.9375"/><polygon fill="#181818" points="289,108.7988,299,112.7988,289,116.7988,293,112.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="295" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="103" y="108.0566">Y&#234;u c&#7847;u phi&#7871;u ch&#7881; &#273;&#7883;nh</text><polygon fill="#181818" points="107,138.1094,97,142.1094,107,146.1094,103,142.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="101" x2="305" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="113" y="137.3672">&#272;&#432;a phi&#7871;u ch&#7881; &#273;&#7883;nh</text><polygon fill="#181818" points="461,167.4199,471,171.4199,461,175.4199,465,171.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="467" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="103" y="166.6777">Qu&#233;t m&#227; phi&#7871;u ch&#7881; &#273;&#7883;nh</text><polygon fill="#181818" points="725,212.041,735,216.041,725,220.041,729,216.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="731" y1="216.041" y2="216.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="490" y="195.9883">POST /invoice-payments/scan</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="490" y="211.2988">prescriptionCode</text><polygon fill="#181818" points="1003,241.3516,1013,245.3516,1003,249.3516,1007,245.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="747" x2="1009" y1="245.3516" y2="245.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="754" y="240.6094">scanPrescription(dto)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="274.6621" y2="274.6621"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="274.6621" y2="287.6621"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="287.6621" y2="287.6621"/><polygon fill="#181818" points="1036,283.6621,1026,287.6621,1036,291.6621,1032,287.6621" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180" x="1032" y="269.9199">prisma.prescription.findFirst</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="316.9727" y2="316.9727"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="316.9727" y2="329.9727"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="329.9727" y2="329.9727"/><polygon fill="#181818" points="1036,325.9727,1026,329.9727,1036,333.9727,1032,329.9727" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="1032" y="312.2305">Validate status not CANCELLED</text><polygon fill="#181818" points="758,370.5938,748,374.5938,758,378.5938,754,374.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="752" x2="1019" y1="374.5938" y2="374.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="764" y="354.541">PrescriptionDetails</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="764" y="369.8516">patientProfile, services, prices</text><polygon fill="#181818" points="494,399.9043,484,403.9043,494,407.9043,490,403.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="488" x2="741" y1="403.9043" y2="403.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="500" y="399.1621">200 OK prescription details</text><polygon fill="#181818" points="107,444.5254,97,448.5254,107,452.5254,103,448.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="448.5254" y2="448.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="113" y="428.4727">Hi&#7875;n th&#7883; danh s&#225;ch d&#7883;ch v&#7909;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="113" y="443.7832">v&#224; gi&#225; t&#7915;ng d&#7883;ch v&#7909;</text><path d="M50,463.5254 L124,463.5254 L124,470.8359 L114,480.8359 L50,480.8359 L50,463.5254 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="308.416" style="stroke:#000000;stroke-width:1.5;" width="1123" x="50" y="463.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="65" y="477.0938">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="181" x="139" y="476.1602">[Ch&#7885;n d&#7883;ch v&#7909; v&#224; xem t&#7893;ng ti&#7873;n]</text><polygon fill="#181818" points="461,498.1465,471,502.1465,461,506.1465,465,502.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="467" y1="502.1465" y2="502.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="103" y="497.4043">T&#237;ch/b&#7887; t&#237;ch d&#7883;ch v&#7909;</text><polygon fill="#181818" points="725,542.7676,735,546.7676,725,550.7676,729,546.7676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="731" y1="546.7676" y2="546.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="490" y="526.7148">POST /invoice-payments/preview</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="490" y="542.0254">prescriptionCode, selectedServiceIds</text><polygon fill="#181818" points="1003,572.0781,1013,576.0781,1003,580.0781,1007,576.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="747" x2="1009" y1="576.0781" y2="576.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="754" y="571.3359">createPaymentPreview(dto)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="605.3887" y2="605.3887"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="605.3887" y2="618.3887"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="618.3887" y2="618.3887"/><polygon fill="#181818" points="1036,614.3887,1026,618.3887,1036,622.3887,1032,618.3887" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="1032" y="600.6465">L&#7885;c selectedServices</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="647.6992" y2="647.6992"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="647.6992" y2="660.6992"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="660.6992" y2="660.6992"/><polygon fill="#181818" points="1036,656.6992,1026,660.6992,1036,664.6992,1032,660.6992" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="1032" y="642.957">T&#237;nh totalAmount</text><polygon fill="#181818" points="758,701.3203,748,705.3203,758,709.3203,754,705.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="752" x2="1019" y1="705.3203" y2="705.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="764" y="685.2676">PaymentPreview</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="764" y="700.5781">selectedServices, totalAmount</text><polygon fill="#181818" points="494,730.6309,484,734.6309,494,738.6309,490,734.6309" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="488" x2="741" y1="734.6309" y2="734.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="500" y="729.8887">200 OK preview</text><polygon fill="#181818" points="107,759.9414,97,763.9414,107,767.9414,103,763.9414" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="763.9414" y2="763.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="113" y="759.1992">Hi&#7875;n th&#7883; t&#7893;ng ti&#7873;n</text><polygon fill="#181818" points="461,796.252,471,800.252,461,804.252,465,800.252" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="467" y1="800.252" y2="800.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="103" y="795.5098">Ch&#7885;n TRANSFER v&#224; nh&#7845;n T&#7841;o h&#243;a &#273;&#417;n</text><polygon fill="#181818" points="725,871.4941,735,875.4941,725,879.4941,729,875.4941" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="731" y1="875.4941" y2="875.4941"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="490" y="824.8203">POST /invoice-payments/create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="490" y="840.1309">prescriptionCode, selectedServiceIds,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="490" y="855.4414">paymentMethod TRANSFER,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="490" y="870.752">returnUrl, cancelUrl</text><line style="stroke:#181818;stroke-width:1.0;" x1="747" x2="789" y1="904.8047" y2="904.8047"/><line style="stroke:#181818;stroke-width:1.0;" x1="789" x2="789" y1="904.8047" y2="917.8047"/><line style="stroke:#181818;stroke-width:1.0;" x1="748" x2="789" y1="917.8047" y2="917.8047"/><polygon fill="#181818" points="758,913.8047,748,917.8047,758,921.8047,754,917.8047" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="754" y="900.0625">L&#7845;y cashierId t&#7915; JWT</text><polygon fill="#181818" points="1003,943.1152,1013,947.1152,1003,951.1152,1007,947.1152" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="747" x2="1009" y1="947.1152" y2="947.1152"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="754" y="942.373">createPayment(dto)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="976.4258" y2="976.4258"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="976.4258" y2="989.4258"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="989.4258" y2="989.4258"/><polygon fill="#181818" points="1036,985.4258,1026,989.4258,1036,993.4258,1032,989.4258" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="1032" y="971.6836">T&#7841;o preview &#273;&#7875; validate</text><polygon fill="#181818" points="1392,1014.7363,1402,1018.7363,1392,1022.7363,1396,1018.7363" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1398" y1="1018.7363" y2="1018.7363"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="1032" y="1013.9941">assignPatientToRooms</text><path d="M10,1033.7363 L72,1033.7363 L72,1041.0469 L62,1051.0469 L10,1051.0469 L10,1033.7363 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="3587.3301" style="stroke:#000000;stroke-width:1.5;" width="1746" x="10" y="1033.7363"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="1047.3047">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109" x="87" y="1046.3711">[Kh&#244;ng c&#243; nh&#226;n s&#250;]</text><polygon fill="#181818" points="758,1068.3574,748,1072.3574,758,1076.3574,754,1072.3574" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="752" x2="1014" y1="1072.3574" y2="1072.3574"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="764" y="1067.6152">Error kh&#244;ng c&#243; nh&#226;n s&#7921;</text><polygon fill="#181818" points="494,1097.668,484,1101.668,494,1105.668,490,1101.668" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="488" x2="736" y1="1101.668" y2="1101.668"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="500" y="1096.9258">400 Bad Request</text><polygon fill="#181818" points="107,1142.2891,97,1146.2891,107,1150.2891,103,1146.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="1146.2891" y2="1146.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="113" y="1126.2363">Hi&#7875;n th&#7883; l&#7895;i</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="113" y="1141.5469">ch&#432;a c&#243; nh&#226;n s&#7921; ph&#7909;c v&#7909;</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1756" y1="1155.2891" y2="1155.2891"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72" x="15" y="1165.9238">[C&#243; nh&#226;n s&#7921;]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="1190.5547" y2="1190.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="1190.5547" y2="1203.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="1203.5547" y2="1203.5547"/><polygon fill="#181818" points="1031,1199.5547,1021,1203.5547,1031,1207.5547,1027,1203.5547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1027" y="1185.8125">Generate invoiceCode</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="1232.8652" y2="1232.8652"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="1232.8652" y2="1245.8652"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="1245.8652" y2="1245.8652"/><polygon fill="#181818" points="1031,1241.8652,1021,1245.8652,1031,1249.8652,1027,1245.8652" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1027" y="1228.123">prisma.$transaction</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="1275.1758" y2="1275.1758"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="1275.1758" y2="1288.1758"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="1288.1758" y2="1288.1758"/><polygon fill="#181818" points="1031,1284.1758,1021,1288.1758,1031,1292.1758,1027,1288.1758" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="1027" y="1270.4336">prisma.invoice.create</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="1317.4863" y2="1317.4863"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="1317.4863" y2="1330.4863"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="1330.4863" y2="1330.4863"/><polygon fill="#181818" points="1031,1326.4863,1021,1330.4863,1031,1334.4863,1027,1330.4863" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="1027" y="1312.7441">Generate numeric orderCode</text><polygon fill="#181818" points="1254,1401.7285,1264,1405.7285,1254,1409.7285,1258,1405.7285" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1260" y1="1405.7285" y2="1405.7285"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="1027" y="1355.0547">createPaymentLink</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1027" y="1370.3652">orderCode, amount, description,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1027" y="1385.6758">returnUrl, cancelUrl,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="1027" y="1400.9863">buyer info, items, metadata</text><line style="stroke:#181818;stroke-width:1.0;" x1="1276" x2="1318" y1="1450.3496" y2="1450.3496"/><line style="stroke:#181818;stroke-width:1.0;" x1="1318" x2="1318" y1="1450.3496" y2="1463.3496"/><line style="stroke:#181818;stroke-width:1.0;" x1="1277" x2="1318" y1="1463.3496" y2="1463.3496"/><polygon fill="#181818" points="1287,1459.3496,1277,1463.3496,1287,1467.3496,1283,1463.3496" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="1283" y="1430.2969">T&#7841;o payment link</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="1283" y="1445.6074">v&#224; QR code</text><polygon fill="#181818" points="1031,1534.5918,1021,1538.5918,1031,1542.5918,1027,1538.5918" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1270" y1="1538.5918" y2="1538.5918"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="1037" y="1487.918">PaymentLinkResult</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="1037" y="1503.2285">paymentUrl, qrCode,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="1037" y="1518.5391">transactionId, status,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="1037" y="1533.8496">expiredAt</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="1567.9023" y2="1567.9023"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="1567.9023" y2="1580.9023"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="1580.9023" y2="1580.9023"/><polygon fill="#181818" points="1031,1576.9023,1021,1580.9023,1031,1584.9023,1027,1580.9023" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="1027" y="1563.1602">Map PayOS status</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="1610.2129" y2="1610.2129"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="1610.2129" y2="1623.2129"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="1623.2129" y2="1623.2129"/><polygon fill="#181818" points="1031,1619.2129,1021,1623.2129,1031,1627.2129,1027,1623.2129" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="1027" y="1605.4707">prisma.paymentTransaction.create</text><polygon fill="#181818" points="753,1694.4551,743,1698.4551,753,1702.4551,749,1698.4551" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="1698.4551" y2="1698.4551"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="759" y="1647.7813">PaymentResult</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="759" y="1663.0918">invoiceCode, totalAmount,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="759" y="1678.4023">paymentStatus PENDING,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254" x="759" y="1693.7129">transaction with paymentUrl and qrCode</text><polygon fill="#181818" points="489,1723.7656,479,1727.7656,489,1731.7656,485,1727.7656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="483" x2="741" y1="1727.7656" y2="1727.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="495" y="1723.0234">200 OK payment created</text><polygon fill="#181818" points="107,1768.3867,97,1772.3867,107,1776.3867,103,1772.3867" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="1772.3867" y2="1772.3867"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="113" y="1752.334">Hi&#7875;n th&#7883; m&#227; QR code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="113" y="1767.6445">v&#224; h&#432;&#7899;ng d&#7851;n</text><polygon fill="#181818" points="289,1813.0078,299,1817.0078,289,1821.0078,293,1817.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="295" y1="1817.0078" y2="1817.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="103" y="1796.9551">H&#432;&#7899;ng d&#7851;n qu&#233;t QR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="103" y="1812.2656">&#273;&#7875; thanh to&#225;n</text><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="353" y1="1861.6289" y2="1861.6289"/><line style="stroke:#181818;stroke-width:1.0;" x1="353" x2="353" y1="1861.6289" y2="1874.6289"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="353" y1="1874.6289" y2="1874.6289"/><polygon fill="#181818" points="322,1870.6289,312,1874.6289,322,1878.6289,318,1874.6289" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="318" y="1841.5762">M&#7903; app ng&#226;n h&#224;ng</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="318" y="1856.8867">ho&#7863;c v&#237; &#273;i&#7879;n t&#7917;</text><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="353" y1="1903.9395" y2="1903.9395"/><line style="stroke:#181818;stroke-width:1.0;" x1="353" x2="353" y1="1903.9395" y2="1916.9395"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="353" y1="1916.9395" y2="1916.9395"/><polygon fill="#181818" points="322,1912.9395,312,1916.9395,322,1920.9395,318,1916.9395" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="318" y="1899.1973">Qu&#233;t m&#227; QR</text><polygon fill="#181818" points="1254,1957.5605,1264,1961.5605,1254,1965.5605,1258,1961.5605" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="1260" y1="1961.5605" y2="1961.5605"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="318" y="1941.5078">Thanh to&#225;n qua</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="318" y="1956.8184">app ng&#226;n h&#224;ng/v&#237;</text><line style="stroke:#181818;stroke-width:1.0;" x1="1276" x2="1318" y1="2006.1816" y2="2006.1816"/><line style="stroke:#181818;stroke-width:1.0;" x1="1318" x2="1318" y1="2006.1816" y2="2019.1816"/><line style="stroke:#181818;stroke-width:1.0;" x1="1277" x2="1318" y1="2019.1816" y2="2019.1816"/><polygon fill="#181818" points="1287,2015.1816,1277,2019.1816,1287,2023.1816,1283,2019.1816" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="1283" y="1986.1289">X&#7917; l&#253; thanh to&#225;n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="1283" y="2001.4395">v&#7899;i ng&#226;n h&#224;ng</text><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="353" y1="2063.8027" y2="2063.8027"/><line style="stroke:#181818;stroke-width:1.0;" x1="353" x2="353" y1="2063.8027" y2="2076.8027"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="353" y1="2076.8027" y2="2076.8027"/><polygon fill="#181818" points="322,2072.8027,312,2076.8027,322,2080.8027,318,2076.8027" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="318" y="2043.75">Nh&#7853;p PIN</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="318" y="2059.0605">ho&#7863;c x&#225;c th&#7921;c sinh tr&#7855;c</text><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="353" y1="2111.1133" y2="2111.1133"/><line style="stroke:#181818;stroke-width:1.0;" x1="353" x2="353" y1="2111.1133" y2="2124.1133"/><line style="stroke:#181818;stroke-width:1.0;" x1="306" x2="353" y1="2124.1133" y2="2124.1133"/><polygon fill="#181818" points="316,2120.1133,306,2124.1133,316,2128.1133,312,2124.1133" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="318" y="2106.3711">X&#225;c nh&#7853;n thanh to&#225;n</text><line style="stroke:#181818;stroke-width:1.0;" x1="1276" x2="1318" y1="2163.7344" y2="2163.7344"/><line style="stroke:#181818;stroke-width:1.0;" x1="1318" x2="1318" y1="2163.7344" y2="2176.7344"/><line style="stroke:#181818;stroke-width:1.0;" x1="1277" x2="1318" y1="2176.7344" y2="2176.7344"/><polygon fill="#181818" points="1287,2172.7344,1277,2176.7344,1287,2180.7344,1283,2176.7344" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1283" y="2143.6816">Nh&#7853;n x&#225;c nh&#7853;n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1283" y="2158.9922">t&#7915; ng&#226;n h&#224;ng</text><polygon fill="#181818" points="758,2217.3555,748,2221.3555,758,2225.3555,754,2221.3555" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="752" x2="1265" y1="2221.3555" y2="2221.3555"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="764" y="2201.3027">POST /invoice-payments/payos/webhook</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="764" y="2216.6133">with signature and payload</text><polygon fill="#181818" points="1003,2246.666,1013,2250.666,1003,2254.666,1007,2250.666" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="747" x2="1009" y1="2250.666" y2="2250.666"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="754" y="2245.9238">handlePayOsWebhook</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="2279.9766" y2="2279.9766"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="2279.9766" y2="2292.9766"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="2292.9766" y2="2292.9766"/><polygon fill="#181818" points="1036,2288.9766,1026,2292.9766,1036,2296.9766,1032,2292.9766" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1032" y="2275.2344">Parse payload JSON</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="2337.5977" y2="2337.5977"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="2337.5977" y2="2350.5977"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="2350.5977" y2="2350.5977"/><polygon fill="#181818" points="1036,2346.5977,1026,2350.5977,1036,2354.5977,1032,2350.5977" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="1032" y="2317.5449">Extract signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="1032" y="2332.8555">from header or payload</text><path d="M20,2365.5977 L82,2365.5977 L82,2372.9082 L72,2382.9082 L20,2382.9082 L20,2365.5977 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="2248.4688" style="stroke:#000000;stroke-width:1.5;" width="1726" x="20" y="2365.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="2379.166">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="97" y="2378.2324">[Kh&#244;ng c&#243; signature]</text><polygon fill="#181818" points="758,2415.5293,748,2419.5293,758,2423.5293,754,2419.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="752" x2="1014" y1="2419.5293" y2="2419.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="764" y="2399.4766">Return success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="764" y="2414.7871">without processing</text><polygon fill="#181818" points="1259,2444.8398,1269,2448.8398,1259,2452.8398,1263,2448.8398" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1265" y1="2448.8398" y2="2448.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="2444.0977">200 OK</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1746" y1="2457.8398" y2="2457.8398"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79" x="25" y="2468.4746">[C&#243; signature]</text><polygon fill="#181818" points="1259,2504.416,1269,2508.416,1259,2512.416,1263,2508.416" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1265" y1="2508.416" y2="2508.416"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1027" y="2488.3633">verifyWebhook</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1027" y="2503.6738">signature, payload</text><polygon fill="#181818" points="1031,2549.0371,1021,2553.0371,1031,2557.0371,1027,2553.0371" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1270" y1="2553.0371" y2="2553.0371"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="1037" y="2532.9844">Verified result</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="1037" y="2548.2949">or false</text><path d="M30,2568.0371 L92,2568.0371 L92,2575.3477 L82,2585.3477 L30,2585.3477 L30,2568.0371 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="2039.0293" style="stroke:#000000;stroke-width:1.5;" width="1706" x="30" y="2568.0371"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="45" y="2581.6055">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="139" x="107" y="2580.6719">[Signature kh&#244;ng h&#7907;p l&#7879;]</text><polygon fill="#181818" points="753,2602.6582,743,2606.6582,753,2610.6582,749,2606.6582" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="2606.6582" y2="2606.6582"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="759" y="2601.916">Error Invalid signature</text><polygon fill="#181818" points="1254,2631.9688,1264,2635.9688,1254,2639.9688,1258,2635.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1260" y1="2635.9688" y2="2635.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="749" y="2631.2266">400 Bad Request</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="30" x2="1736" y1="2674.9688" y2="2674.9688"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="100" x="35" y="2685.6035">[Signature h&#7907;p l&#7879;]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="2725.5449" y2="2725.5449"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="2725.5449" y2="2738.5449"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="2738.5449" y2="2738.5449"/><polygon fill="#181818" points="1031,2734.5449,1021,2738.5449,1031,2742.5449,1027,2738.5449" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="1027" y="2705.4922">Extract transactionId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="1027" y="2720.8027">and orderCode from payload</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="2767.8555" y2="2767.8555"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="2767.8555" y2="2780.8555"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="2780.8555" y2="2780.8555"/><polygon fill="#181818" points="1031,2776.8555,1021,2780.8555,1031,2784.8555,1027,2780.8555" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="1027" y="2763.1133">prisma.paymentTransaction.findFirst</text><path d="M631,2795.8555 L693,2795.8555 L693,2803.166 L683,2813.166 L631,2813.166 L631,2795.8555 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="252.1289" style="stroke:#000000;stroke-width:1.5;" width="707.5" x="631" y="2795.8555"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="646" y="2809.4238">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="163" x="708" y="2808.4902">[Transaction kh&#244;ng t&#236;m th&#7845;y]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="2834.4766" y2="2834.4766"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="2834.4766" y2="2847.4766"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="2847.4766" y2="2847.4766"/><polygon fill="#181818" points="1031,2843.4766,1021,2847.4766,1031,2851.4766,1027,2847.4766" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="1027" y="2829.7344">prisma.paymentTransaction.findMany</text><path d="M641,2862.4766 L703,2862.4766 L703,2869.7871 L693,2879.7871 L641,2879.7871 L641,2862.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="178.5078" style="stroke:#000000;stroke-width:1.5;" width="687.5" x="641" y="2862.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="656" y="2876.0449">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="718" y="2875.1113">[T&#236;m th&#7845;y 1 candidate]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="2901.0977" y2="2901.0977"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="2901.0977" y2="2914.0977"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="2914.0977" y2="2914.0977"/><polygon fill="#181818" points="1031,2910.0977,1021,2914.0977,1031,2918.0977,1027,2914.0977" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1027" y="2896.3555">Use fallback transaction</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1328.5" y1="2923.0977" y2="2923.0977"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94" x="646" y="2933.7324">[Kh&#244;ng t&#236;m th&#7845;y]</text><polygon fill="#181818" points="753,2969.6738,743,2973.6738,753,2977.6738,749,2973.6738" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="2973.6738" y2="2973.6738"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="759" y="2953.6211">Return success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="759" y="2968.9316">without invoice update</text><polygon fill="#181818" points="1254,2998.9844,1264,3002.9844,1254,3006.9844,1258,3002.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1260" y1="3002.9844" y2="3002.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="2998.2422">200 OK</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="3091.6055" y2="3091.6055"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="3091.6055" y2="3104.6055"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="3104.6055" y2="3104.6055"/><polygon fill="#181818" points="1031,3100.6055,1021,3104.6055,1031,3108.6055,1027,3104.6055" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="1027" y="3071.5527">Map status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="1027" y="3086.8633">from payload</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="3133.916" y2="3133.916"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="3133.916" y2="3146.916"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="3146.916" y2="3146.916"/><polygon fill="#181818" points="1031,3142.916,1021,3146.916,1031,3150.916,1027,3146.916" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222" x="1027" y="3129.1738">prisma.paymentTransaction.update</text><path d="M40,3161.916 L102,3161.916 L102,3169.2266 L92,3179.2266 L40,3179.2266 L40,3161.916 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1438.1504" style="stroke:#000000;stroke-width:1.5;" width="1686" x="40" y="3161.916"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="55" y="3175.4844">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128" x="117" y="3174.5508">[Status is SUCCEEDED]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="3215.8477" y2="3215.8477"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="3215.8477" y2="3228.8477"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="3228.8477" y2="3228.8477"/><polygon fill="#181818" points="1031,3224.8477,1021,3228.8477,1031,3232.8477,1027,3228.8477" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1027" y="3195.7949">Check if invoice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1027" y="3211.1055">already isPaid</text><path d="M50,3243.8477 L112,3243.8477 L112,3251.1582 L102,3261.1582 L50,3261.1582 L50,3243.8477 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="923.582" style="stroke:#000000;stroke-width:1.5;" width="1666" x="50" y="3243.8477"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="65" y="3257.416">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="104" x="127" y="3256.4824">[Invoice &#273;&#227; isPaid]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="3282.4688" y2="3282.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="3282.4688" y2="3295.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="3295.4688" y2="3295.4688"/><polygon fill="#181818" points="1031,3291.4688,1021,3295.4688,1031,3299.4688,1027,3295.4688" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="1027" y="3277.7266">// done</text><line style="stroke:#181818;stroke-width:1.0;" x1="1525" x2="1515" y1="3324.7793" y2="3320.7793"/><line style="stroke:#181818;stroke-width:1.0;" x1="1525" x2="1515" y1="3324.7793" y2="3328.7793"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1526" y1="3324.7793" y2="3324.7793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="1027" y="3320.0371">notifyInvoicePaymentSuccess</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="489" y1="3369.4004" y2="3365.4004"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="489" y1="3369.4004" y2="3373.4004"/><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="1526" y1="3369.4004" y2="3369.4004"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="495" y="3349.3477">WebSocket notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="495" y="3364.6582">thanh to&#225;n th&#224;nh c&#244;ng</text><line style="stroke:#181818;stroke-width:1.0;" x1="1537" x2="1579" y1="3403.7109" y2="3403.7109"/><line style="stroke:#181818;stroke-width:1.0;" x1="1579" x2="1579" y1="3403.7109" y2="3416.7109"/><line style="stroke:#181818;stroke-width:1.0;" x1="1532" x2="1579" y1="3416.7109" y2="3416.7109"/><polygon fill="#181818" points="1542,3412.7109,1532,3416.7109,1542,3420.7109,1538,3416.7109" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1544" y="3398.9688">Broadcast to clinic rooms</text><polygon fill="#181818" points="753,3452.332,743,3456.332,753,3460.332,749,3456.332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="3456.332" y2="3456.332"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="759" y="3436.2793">Return success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="759" y="3451.5898">with invoiceCode</text><polygon fill="#181818" points="1254,3481.6426,1264,3485.6426,1254,3489.6426,1258,3485.6426" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1260" y1="3485.6426" y2="3485.6426"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="3480.9004">200 OK</text><polygon fill="#181818" points="107,3556.2637,97,3560.2637,107,3564.2637,103,3560.2637" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="3560.2637" y2="3560.2637"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="113" y="3540.2109">Hi&#7875;n th&#7883; notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="113" y="3555.5215">thanh to&#225;n th&#224;nh c&#244;ng</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="50" x2="1716" y1="3569.2637" y2="3569.2637"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="118" x="55" y="3579.8984">[Invoice ch&#432;a isPaid]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="3604.5293" y2="3604.5293"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="3604.5293" y2="3617.5293"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="3617.5293" y2="3617.5293"/><polygon fill="#181818" points="1031,3613.5293,1021,3617.5293,1031,3621.5293,1027,3617.5293" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="1027" y="3599.7871">prisma.invoice.update</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="3646.8398" y2="3646.8398"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="3646.8398" y2="3659.8398"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="3659.8398" y2="3659.8398"/><polygon fill="#181818" points="1031,3655.8398,1021,3659.8398,1031,3663.8398,1027,3659.8398" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="1027" y="3642.0977">prisma.prescription.update</text><polygon fill="#181818" points="1392,3685.1504,1402,3689.1504,1392,3693.1504,1396,3689.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1398" y1="3689.1504" y2="3689.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="1027" y="3684.4082">assignPatientToRooms</text><line style="stroke:#181818;stroke-width:1.0;" x1="1525" x2="1515" y1="3733.7715" y2="3729.7715"/><line style="stroke:#181818;stroke-width:1.0;" x1="1525" x2="1515" y1="3733.7715" y2="3737.7715"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1526" y1="3733.7715" y2="3733.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="1027" y="3713.7188">notifyInvoicePaymentSuccess</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="1027" y="3729.0293">and routing created</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="489" y1="3778.3926" y2="3774.3926"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="489" y1="3778.3926" y2="3782.3926"/><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="1526" y1="3778.3926" y2="3778.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="495" y="3758.3398">WebSocket notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="495" y="3773.6504">thanh to&#225;n th&#224;nh c&#244;ng</text><line style="stroke:#181818;stroke-width:1.0;" x1="1537" x2="1579" y1="3828.0137" y2="3828.0137"/><line style="stroke:#181818;stroke-width:1.0;" x1="1579" x2="1579" y1="3828.0137" y2="3841.0137"/><line style="stroke:#181818;stroke-width:1.0;" x1="1532" x2="1579" y1="3841.0137" y2="3841.0137"/><polygon fill="#181818" points="1542,3837.0137,1532,3841.0137,1542,3845.0137,1538,3841.0137" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1544" y="3807.9609">Broadcast to clinic rooms</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1544" y="3823.2715">v&#7899;i routing info</text><polygon fill="#181818" points="753,3876.6348,743,3880.6348,753,3884.6348,749,3880.6348" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="3880.6348" y2="3880.6348"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="759" y="3860.582">Return success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="759" y="3875.8926">with invoiceCode and data</text><polygon fill="#181818" points="1254,3905.9453,1264,3909.9453,1254,3913.9453,1258,3909.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1260" y1="3909.9453" y2="3909.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="3905.2031">200 OK</text><polygon fill="#181818" points="107,3980.5664,97,3984.5664,107,3988.5664,103,3984.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="3984.5664" y2="3984.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="113" y="3964.5137">Hi&#7875;n th&#7883; notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="113" y="3979.8242">thanh to&#225;n th&#224;nh c&#244;ng</text><polygon fill="#181818" points="461,4009.877,471,4013.877,461,4017.877,465,4013.877" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="467" y1="4013.877" y2="4013.877"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="103" y="4009.1348">In h&#243;a &#273;&#417;n</text><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="525" y1="4043.1875" y2="4043.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="525" x2="525" y1="4043.1875" y2="4056.1875"/><line style="stroke:#181818;stroke-width:1.0;" x1="484" x2="525" y1="4056.1875" y2="4056.1875"/><polygon fill="#181818" points="494,4052.1875,484,4056.1875,494,4060.1875,490,4056.1875" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="490" y="4038.4453">Generate invoice PDF</text><polygon fill="#181818" points="107,4081.498,97,4085.498,107,4089.498,103,4085.498" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="4085.498" y2="4085.498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="113" y="4080.7559">H&#243;a &#273;&#417;n in ra</text><polygon fill="#181818" points="289,4110.8086,299,4114.8086,289,4118.8086,293,4114.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="295" y1="4114.8086" y2="4114.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="103" y="4110.0664">Trao h&#243;a &#273;&#417;n</text><polygon fill="#181818" points="294,4155.4297,304,4159.4297,294,4163.4297,298,4159.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="300" y1="4159.4297" y2="4159.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="103" y="4139.377">H&#432;&#7899;ng d&#7851;n &#273;&#7871;n ph&#242;ng kh&#225;m</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="103" y="4154.6875">theo routing assignment</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="40" x2="1726" y1="4175.4297" y2="4175.4297"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="186" x="45" y="4186.0645">[Status is CANCELLED or FAILED]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="4210.6953" y2="4210.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="4210.6953" y2="4223.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="4223.6953" y2="4223.6953"/><polygon fill="#181818" points="1031,4219.6953,1021,4223.6953,1031,4227.6953,1027,4223.6953" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="1027" y="4205.9531">// done</text><polygon fill="#181818" points="753,4264.3164,743,4268.3164,753,4272.3164,749,4268.3164" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="4268.3164" y2="4268.3164"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="759" y="4248.2637">Return success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="759" y="4263.5742">with status</text><polygon fill="#181818" points="1254,4293.627,1264,4297.627,1254,4301.627,1258,4297.627" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1260" y1="4297.627" y2="4297.627"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="4292.8848">200 OK</text><line style="stroke:#181818;stroke-width:1.0;" x1="1525" x2="1515" y1="4356.9375" y2="4352.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1525" x2="1515" y1="4356.9375" y2="4360.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1526" y1="4356.9375" y2="4356.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1027" y="4352.1953">Notify payment failed</text><line style="stroke:#181818;stroke-width:1.0;" x1="484" x2="494" y1="4401.5586" y2="4397.5586"/><line style="stroke:#181818;stroke-width:1.0;" x1="484" x2="494" y1="4401.5586" y2="4405.5586"/><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="1531" y1="4401.5586" y2="4401.5586"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="500" y="4381.5059">WebSocket notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="500" y="4396.8164">thanh to&#225;n th&#7845;t b&#7841;i</text><polygon fill="#181818" points="107,4442.1797,97,4446.1797,107,4450.1797,103,4446.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="4446.1797" y2="4446.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="113" y="4426.127">Hi&#7875;n th&#7883; thanh to&#225;n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="113" y="4441.4375">th&#7845;t b&#7841;i ho&#7863;c h&#7911;y</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="40" x2="1726" y1="4455.1797" y2="4455.1797"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="211" x="45" y="4465.8145">[Status kh&#225;c (PENDING/PROCESSING)]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="4490.4453" y2="4490.4453"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="4490.4453" y2="4503.4453"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="4503.4453" y2="4503.4453"/><polygon fill="#181818" points="1031,4499.4453,1021,4503.4453,1031,4507.4453,1027,4503.4453" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49" x="1027" y="4485.7031">// done</text><polygon fill="#181818" points="753,4528.7559,743,4532.7559,753,4536.7559,749,4532.7559" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="4532.7559" y2="4532.7559"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="759" y="4528.0137">Return success</text><polygon fill="#181818" points="1254,4558.0664,1264,4562.0664,1254,4566.0664,1258,4562.0664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1260" y1="4562.0664" y2="4562.0664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="4557.3242">200 OK</text><!--SRC=[xLbFR-F65R_pKpmiUaW0PPqMFVaGm2jh4sMzibQoenJGPKoEpS5ICrfovBMEGGv141HD3a4EEJHk40HjQhHf0XIGKEIWHRu7lqdVS4QZ8KMAj3SDi40Dx5eYPzxVt_kzDsFYIn73lPDm1lnYzHT-3qW2RPA4ZCOUqIyVfCkFU0WyNB_l4yaebvvt9cOy8F7S4G2dtMpDQTVp1PUnYE1UbryAvjC-cKzmMri_ZcYibTcl7hvaSbvSFwJn9NxB5flFTYKkEKxS1Uh1qBuUY9ba_C9TO1xP9IDwDXJ-KvfJCnfwdWa2lF7Msjzz-CFgRpFmqyMtCvY6B5tyXD_2TFanlFWiNNx2GnKnTaaajI4olvKK8t0VNdpwypz9XO20RebmBJdjxiEJsUgl4YQhh-jim1HufzrCjOtnFlIFXoUmntI8tvZg62TxYK_uc4zZclWncqecU5i4T2FCIPEt-Qo4cy3jWnBHTmIy5aZn-aR2EdUU-P3REurPCY7tNVttpnaF7h8uaULRtYCH2vJWH18vIu0B2Us3NhjpTDGvTBOK_NTK7599M9IWtphM_LYSiuYs8D6RavOo37-xUR5-k64mkVdTcs_2yIDmtO10At55kC5K6NBHyGvBbnzoa9ZJJo0WM7Z9wjeF8S3l-EioNNupvfUhh-22hQv1fill-8NxqjMZ4109COKsIliZTvU14d559qh2voX1ejeFk0VuKy3RoUh63_VEqkMVGAgFEMLglQjEVS_-QmmyZDKbey-tiQUo455Vqi14l1iaUNrE6AtU2cpwCSKTXb7wMgN6PqxYEhTMN1dmZZ2MVj6uf78vnW-JA8KaqS442LEMI2-6AcVdc1TrjRR4bU2pD2HRE5KAYXBAuheJfjiOoeEGyc2BnWmaJmO7lU73pY338m_JnJVuB5rS2mXNFn0ajP-l-HqfJUUy6R1QYWEoVO-f34LWxS8NCPMpc9_6KGkGuNmQuSScnEYQU8IEpN5x5e9kaDKjl3iwgIJJ761lmwGwU2QpMLFu42uDLUPsc4wuZmqlOHVSj9iJCH1YadWUYIGy2bS_ObxzrG-w-oCLBNO2jnF7E34ytTgMBh-lWkBl4OeFI003-cn64raFjYXTVi76t0zL5ythm8w8fEHlg2aFmzqmBoaX6YMuRDkDihY_JJcDrMQ3mwnzLgus_UutCYOyKNe5hrjhvDxNoF3g3U6p2SNk1I8EQ5ngJZOj5R1snFZJCRTxMa0obcbXV6mLLHG5FZwRpJ6tZ9-B5Z199qXL4-n_23wIPrezg6NFie-EEGR1sXo8CdiKEpmPW6-zC9jSnnq71ZIPHTBMT6RcC-tFc3inxmOjCpxWSterPJ4D3hOOrR6rBE2FoTIOeqNLPjrOTRAnepofvLrXxPk3irm_s53PK0z6_KxliDjxE-yvF6SoX4ryWF30XAYg6kgQYKcOTYNOKMtrDQwcMvDkdNiizdJvPJRfBBuhQp75oSNExE_aTiApR7f-CXXpJOqo95btNbtp8a3D-AtHPiTuA_XnklmpaEdKd7l2rLVyOin3aIx-ZGoqka7kPUhafBZ-fbhCPfn_CYXPfIjYOoGwGCQye7OFrJKkh_VH78XM_t5Tno1Za9WhizhY7dRf6uHyjsVTlS8HDKlTzpWOCIKrJXV_yAjblAysg7P_mxTIK7O6AdEafxTVRKGXmbLVBV72x6moZvAvIFQUqxDG22IUh4nKVyHIYcbM9RWY4YIed4LtpQ7eQX3HxDWwqYhA1z1A2kcJ67kICG7U7HxtgjTshh3WVRanVypFOp61a19aT-mBrXLjHBxZsrtPort4DCXw0IGp7sVJHCSCXmkaEw4UgEFsMaI1FamcDOFOHTKzkfIOIrwuCx1juZiSifPSOiSydu_MsRTRMlbGLNIWzzHkHWE83KTZYCy9wgysthvHqHzQd9aH2YlgwwcQU3wow-h7hoxFvhqIVwipK3Q5MSlAmrsVgPtPsf4ncxLDFEe2KOBwN9j7oiJAjLCDP7MmbTBRzstdZY8NCaocisoTJhdw-qJH99u5SillflSnuNDlIqwcUgC7Vglciq2F_r3oKwRt56EFk8tEYFyKYYEg-vDbwL6zStTX3yFCC9jMsjw8JHf2kJca6q6x0SHj47dW5R_NGb8DdNhSDAJ-2u3PH7eBoMQEP0aCJzljJkUmSzW8lksG8dxO-JgLM8GH3eV174Nr2GlAmMjkVt5ymfd8B6mAtBqz20IdNis6js24EE528jSNBfir2dU3PrIUwj4m4wr6Odkhh9KmdwW0utZY379I3IWXjjeVdVwu9I-pz46CcVL9WgGcmCSJ4PxgukoONWEvqT1xwLhC7MWRGlnLgDRTAirrGV5dvwdb9NAzVL6nHRFhkj0N7xSiZC8TmWvERNexNqOM9J9gRfbUiavrMu-rZjp9ynKetlMXQss-kZNvjGiwEz3Osvd_L_R_khBBmvU_6Uzoz-xxhhveMSLRIUWVFcpclhK0jq9CVW7VxE4VPmxHsCNS5K0JwOKBdnUVfOkVE4p3rR_m6GxYrnELGIfitMbcKgnI3ozjI-q4bnrUxDHa_ogfZjmF3xf73UUdocdcLjLkBYNlKjktgkkQccvMp_MrNEmElQmxsDl7SyAYaXQmY_vlJVrun95mbYwkcNTBgjvLkBl_mkRUrRaMWBc1mrNVphtcOuKBKLKKFhncxedt-eFZTcSun8-l_nemVLMHMKK0wy_gj_htNm00]--></g></svg>