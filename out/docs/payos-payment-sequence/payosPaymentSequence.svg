<?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="5655px" preserveAspectRatio="none" style="width:1792px;height:5655px;background:#FFFFFF;" version="1.1" viewBox="0 0 1792 5655" width="1792px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="112.7988"/><rect fill="#FFFFFF" height="295.1055" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="2273.7715"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="5077.5781"/><rect fill="#FFFFFF" height="324.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="171.4199"/><rect fill="#FFFFFF" height="261.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="549.0781"/><rect fill="#FFFFFF" height="464.5898" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="847.1836"/><rect fill="#FFFFFF" height="74.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="4191.375"/><rect fill="#FFFFFF" height="74.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="4872.7148"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="4976.6465"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="5351.3281"/><rect fill="#FFFFFF" height="234.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="216.041"/><rect fill="#FFFFFF" height="187.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="593.6992"/><rect fill="#FFFFFF" height="389.3477" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="922.4258"/><rect fill="#FFFFFF" height="242.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="2678.1191"/><rect fill="#FFFFFF" height="176.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="245.3516"/><rect fill="#FFFFFF" height="129.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="623.0098"/><rect fill="#FFFFFF" height="317.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="994.0469"/><rect fill="#FFFFFF" height="198.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="2722.7402"/><rect fill="#FFFFFF" height="132.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="1725.0078"/><rect fill="#FFFFFF" height="502.5898" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="2418.3242"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="3108.043"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="3584.2324"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="4191.375"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="4872.7148"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="5247.3965"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="5498.8359"/><rect fill="#FFFFFF" height="103.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1376" y="1080.9785"/><rect fill="#FFFFFF" height="103.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1376" y="4548.6777"/><rect fill="#FFFFFF" height="79.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1504" y="4030.5117"/><rect fill="#FFFFFF" height="95.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1504" y="4696.541"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="1504" y="5306.707"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="305.2832"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="1125.5996"/><rect fill="#FFFFFF" height="681.627" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="1398.3496"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="3301.1719"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="3399.4141"/><rect fill="#FFFFFF" height="286.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="3715.1641"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="4593.2988"/><rect fill="none" height="308.416" style="stroke:#000000;stroke-width:1.5;" width="1135" x="50" y="510.457"/><rect fill="none" height="4358.6152" style="stroke:#000000;stroke-width:1.5;" width="1775" x="10" y="1199.2207"/><rect fill="none" height="2713.1641" style="stroke:#000000;stroke-width:1.5;" width="1755" x="20" y="2837.6719"/><rect fill="none" height="2503.7246" style="stroke:#000000;stroke-width:1.5;" width="1735" x="30" y="3040.1113"/><rect fill="none" height="283.75" style="stroke:#000000;stroke-width:1.5;" width="1114" x="631" y="3345.4824"/><rect fill="none" height="178.5078" style="stroke:#000000;stroke-width:1.5;" width="664.5" x="641" y="3443.7246"/><rect fill="none" height="1656.1875" style="stroke:#000000;stroke-width:1.5;" width="1715" x="40" y="3880.6484"/><rect fill="none" height="1167.6191" style="stroke:#000000;stroke-width:1.5;" width="1695" x="50" y="3962.5801"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="96" x2="96" y1="81.4883" y2="5574.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="305.5" x2="305.5" y1="81.4883" y2="5574.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="478" x2="478" y1="81.4883" y2="5574.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="742" x2="742" y1="81.4883" y2="5574.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1020" x2="1020" y1="81.4883" y2="5574.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1247.5" x2="1247.5" y1="81.4883" y2="5574.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1381" x2="1381" y1="81.4883" y2="5574.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1509" x2="1509" y1="81.4883" y2="5574.8359"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1693" x2="1693" y1="81.4883" y2="5574.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="60" y="78.5352">Thu ng&#226;n</text><ellipse cx="96" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M96,21.5 L96,48.5 M83,29.5 L109,29.5 M96,48.5 L83,63.5 M96,48.5 L109,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="60" y="5587.3711">Thu ng&#226;n</text><ellipse cx="96" cy="5598.8242" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M96,5606.8242 L96,5633.8242 M83,5614.8242 L109,5614.8242 M96,5633.8242 L83,5648.8242 M96,5633.8242 L109,5648.8242 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="266.5" y="78.5352">B&#7879;nh nh&#226;n</text><ellipse cx="306" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M306,21.5 L306,48.5 M293,29.5 L319,29.5 M306,48.5 L293,63.5 M306,48.5 L319,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="266.5" y="5587.3711">B&#7879;nh nh&#226;n</text><ellipse cx="306" cy="5598.8242" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M306,5606.8242 L306,5633.8242 M293,5614.8242 L319,5614.8242 M306,5633.8242 L293,5648.8242 M306,5633.8242 L319,5648.8242 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="433" y="78.5352">Thu ng&#226;n UI</text><path d="M457.5,37 L457.5,61 M457.5,49 L474.5,49 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="486.5" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="433" y="5587.3711">Thu ng&#226;n UI</text><path d="M457.5,5594.3242 L457.5,5618.3242 M457.5,5606.3242 L474.5,5606.3242 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="486.5" cy="5606.3242" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="651" y="78.5352">InvoicePaymentController</text><ellipse cx="742" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="738,37,744,32,742,37,744,42,738,37" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="176" x="651" y="5587.3711">InvoicePaymentController</text><ellipse cx="742" cy="5606.3242" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="738,5594.3242,744,5589.3242,742,5594.3242,744,5599.3242,738,5594.3242" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="940" y="78.5352">InvoicePaymentService</text><ellipse cx="1020" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1008" x2="1032" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="940" y="5587.3711">InvoicePaymentService</text><ellipse cx="1020" cy="5606.3242" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1008" x2="1032" y1="5620.3242" y2="5620.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1200.5" y="78.5352">PayOsService</text><ellipse cx="1248" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1236" x2="1260" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="1200.5" y="5587.3711">PayOsService</text><ellipse cx="1248" cy="5606.3242" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1236" x2="1260" y1="5620.3242" y2="5620.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1327" y="78.5352">RoutingService</text><ellipse cx="1381" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1369" x2="1393" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="1327" y="5587.3711">RoutingService</text><ellipse cx="1381" cy="5606.3242" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1369" x2="1393" y1="5620.3242" y2="5620.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1445" y="78.5352">WebSocketService</text><ellipse cx="1509" cy="49" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1497" x2="1521" y1="63" y2="63"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="1445" y="5587.3711">WebSocketService</text><ellipse cx="1509" cy="5606.3242" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1497" x2="1521" y1="5620.3242" y2="5620.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1651" y="78.5352">PostgreSQL</text><path d="M1675,29 C1675,19 1693,19 1693,19 C1693,19 1711,19 1711,29 L1711,55 C1711,65 1693,65 1693,65 C1693,65 1675,65 1675,55 L1675,29 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1675,29 C1675,39 1693,39 1693,39 C1693,39 1711,39 1711,29 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="1651" y="5587.3711">PostgreSQL</text><path d="M1675,5600.3242 C1675,5590.3242 1693,5590.3242 1693,5590.3242 C1693,5590.3242 1711,5590.3242 1711,5600.3242 L1711,5626.3242 C1711,5636.3242 1693,5636.3242 1693,5636.3242 C1693,5636.3242 1675,5636.3242 1675,5626.3242 L1675,5600.3242 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1675,5600.3242 C1675,5610.3242 1693,5610.3242 1693,5610.3242 C1693,5610.3242 1711,5610.3242 1711,5600.3242 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="112.7988"/><rect fill="#FFFFFF" height="295.1055" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="2273.7715"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="301" y="5077.5781"/><rect fill="#FFFFFF" height="324.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="171.4199"/><rect fill="#FFFFFF" height="261.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="549.0781"/><rect fill="#FFFFFF" height="464.5898" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="847.1836"/><rect fill="#FFFFFF" height="74.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="4191.375"/><rect fill="#FFFFFF" height="74.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="4872.7148"/><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="4976.6465"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="473" y="5351.3281"/><rect fill="#FFFFFF" height="234.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="216.041"/><rect fill="#FFFFFF" height="187.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="593.6992"/><rect fill="#FFFFFF" height="389.3477" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="922.4258"/><rect fill="#FFFFFF" height="242.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="737" y="2678.1191"/><rect fill="#FFFFFF" height="176.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="245.3516"/><rect fill="#FFFFFF" height="129.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="623.0098"/><rect fill="#FFFFFF" height="317.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="994.0469"/><rect fill="#FFFFFF" height="198.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="1015" y="2722.7402"/><rect fill="#FFFFFF" height="132.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="1725.0078"/><rect fill="#FFFFFF" height="502.5898" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="2418.3242"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="3108.043"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="3584.2324"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="4191.375"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="4872.7148"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="5247.3965"/><rect fill="#FFFFFF" height="30" style="stroke:#181818;stroke-width:1.0;" width="10" x="1243" y="5498.8359"/><rect fill="#FFFFFF" height="103.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1376" y="1080.9785"/><rect fill="#FFFFFF" height="103.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1376" y="4548.6777"/><rect fill="#FFFFFF" height="79.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="1504" y="4030.5117"/><rect fill="#FFFFFF" height="95.2422" style="stroke:#181818;stroke-width:1.0;" width="10" x="1504" y="4696.541"/><rect fill="#FFFFFF" height="44.6211" style="stroke:#181818;stroke-width:1.0;" width="10" x="1504" y="5306.707"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="305.2832"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="1125.5996"/><rect fill="#FFFFFF" height="681.627" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="1398.3496"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="3301.1719"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="3399.4141"/><rect fill="#FFFFFF" height="286.0371" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="3715.1641"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="1688" y="4593.2988"/><polygon fill="#181818" points="289,108.7988,299,112.7988,289,116.7988,293,112.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="295" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="103" y="108.0566">Y&#234;u c&#7847;u phi&#7871;u ch&#7881; &#273;&#7883;nh</text><polygon fill="#181818" points="107,138.1094,97,142.1094,107,146.1094,103,142.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="101" x2="305" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="113" y="137.3672">&#272;&#432;a phi&#7871;u ch&#7881; &#273;&#7883;nh</text><polygon fill="#181818" points="461,167.4199,471,171.4199,461,175.4199,465,171.4199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="467" y1="171.4199" y2="171.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="103" y="166.6777">Qu&#233;t m&#227; phi&#7871;u ch&#7881; &#273;&#7883;nh</text><polygon fill="#181818" points="725,212.041,735,216.041,725,220.041,729,216.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="731" y1="216.041" y2="216.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="490" y="195.9883">POST /invoice-payments/scan</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="490" y="211.2988">prescriptionCode</text><polygon fill="#181818" points="1003,241.3516,1013,245.3516,1003,249.3516,1007,245.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="747" x2="1009" y1="245.3516" y2="245.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="754" y="240.6094">scanPrescription(dto)</text><polygon fill="#181818" points="1676,301.2832,1686,305.2832,1676,309.2832,1680,305.2832" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1682" y1="305.2832" y2="305.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="1032" y="269.9199">SELECT prescription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="1032" y="285.2305">WHERE prescriptionCode</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252" x="1032" y="300.541">INCLUDE patientProfile, doctor, services</text><polygon fill="#181818" points="1036,330.5938,1026,334.5938,1036,338.5938,1032,334.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1030" x2="1692" y1="334.5938" y2="334.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="1042" y="329.8516">Prescription data</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="363.9043" y2="363.9043"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="363.9043" y2="376.9043"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="376.9043" y2="376.9043"/><polygon fill="#181818" points="1036,372.9043,1026,376.9043,1036,380.9043,1032,376.9043" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="1032" y="359.1621">Validate status not CANCELLED</text><polygon fill="#181818" points="758,417.5254,748,421.5254,758,425.5254,754,421.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="752" x2="1019" y1="421.5254" y2="421.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="764" y="401.4727">PrescriptionDetails</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="764" y="416.7832">patientProfile, services, prices</text><polygon fill="#181818" points="494,446.8359,484,450.8359,494,454.8359,490,450.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="488" x2="741" y1="450.8359" y2="450.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="500" y="446.0938">200 OK prescription details</text><polygon fill="#181818" points="107,491.457,97,495.457,107,499.457,103,495.457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="495.457" y2="495.457"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="113" y="475.4043">Hi&#7875;n th&#7883; danh s&#225;ch d&#7883;ch v&#7909;</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="113" y="490.7148">v&#224; gi&#225; t&#7915;ng d&#7883;ch v&#7909;</text><path d="M50,510.457 L124,510.457 L124,517.7676 L114,527.7676 L50,527.7676 L50,510.457 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="308.416" style="stroke:#000000;stroke-width:1.5;" width="1135" x="50" y="510.457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="65" y="524.0254">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="181" x="139" y="523.0918">[Ch&#7885;n d&#7883;ch v&#7909; v&#224; xem t&#7893;ng ti&#7873;n]</text><polygon fill="#181818" points="461,545.0781,471,549.0781,461,553.0781,465,549.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="467" y1="549.0781" y2="549.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="103" y="544.3359">T&#237;ch/b&#7887; t&#237;ch d&#7883;ch v&#7909;</text><polygon fill="#181818" points="725,589.6992,735,593.6992,725,597.6992,729,593.6992" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="731" y1="593.6992" y2="593.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="490" y="573.6465">POST /invoice-payments/preview</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="490" y="588.957">prescriptionCode, selectedServiceIds</text><polygon fill="#181818" points="1003,619.0098,1013,623.0098,1003,627.0098,1007,623.0098" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="747" x2="1009" y1="623.0098" y2="623.0098"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="754" y="618.2676">createPaymentPreview(dto)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="652.3203" y2="652.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="652.3203" y2="665.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="665.3203" y2="665.3203"/><polygon fill="#181818" points="1036,661.3203,1026,665.3203,1036,669.3203,1032,665.3203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="1032" y="647.5781">L&#7885;c selectedServices</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="694.6309" y2="694.6309"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="694.6309" y2="707.6309"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="707.6309" y2="707.6309"/><polygon fill="#181818" points="1036,703.6309,1026,707.6309,1036,711.6309,1032,707.6309" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="1032" y="689.8887">Calculate totalAmount</text><polygon fill="#181818" points="758,748.252,748,752.252,758,756.252,754,752.252" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="752" x2="1019" y1="752.252" y2="752.252"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="764" y="732.1992">PaymentPreview</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="764" y="747.5098">selectedServices, totalAmount</text><polygon fill="#181818" points="494,777.5625,484,781.5625,494,785.5625,490,781.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="488" x2="741" y1="781.5625" y2="781.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="500" y="776.8203">200 OK preview</text><polygon fill="#181818" points="107,806.873,97,810.873,107,814.873,103,810.873" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="810.873" y2="810.873"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="113" y="806.1309">Hi&#7875;n th&#7883; t&#7893;ng ti&#7873;n</text><polygon fill="#181818" points="461,843.1836,471,847.1836,461,851.1836,465,847.1836" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="467" y1="847.1836" y2="847.1836"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="103" y="842.4414">Ch&#7885;n TRANSFER v&#224; nh&#7845;n T&#7841;o h&#243;a &#273;&#417;n</text><polygon fill="#181818" points="725,918.4258,735,922.4258,725,926.4258,729,922.4258" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="731" y1="922.4258" y2="922.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="490" y="871.752">POST /invoice-payments/create</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="490" y="887.0625">prescriptionCode, selectedServiceIds,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="490" y="902.373">paymentMethod TRANSFER,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="490" y="917.6836">returnUrl, cancelUrl</text><line style="stroke:#181818;stroke-width:1.0;" x1="747" x2="789" y1="951.7363" y2="951.7363"/><line style="stroke:#181818;stroke-width:1.0;" x1="789" x2="789" y1="951.7363" y2="964.7363"/><line style="stroke:#181818;stroke-width:1.0;" x1="748" x2="789" y1="964.7363" y2="964.7363"/><polygon fill="#181818" points="758,960.7363,748,964.7363,758,968.7363,754,964.7363" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="754" y="946.9941">L&#7845;y cashierId t&#7915; JWT</text><polygon fill="#181818" points="1003,990.0469,1013,994.0469,1003,998.0469,1007,994.0469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="747" x2="1009" y1="994.0469" y2="994.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="754" y="989.3047">createPayment(dto)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="1023.3574" y2="1023.3574"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="1023.3574" y2="1036.3574"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="1036.3574" y2="1036.3574"/><polygon fill="#181818" points="1036,1032.3574,1026,1036.3574,1036,1040.3574,1032,1036.3574" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="1032" y="1018.6152">T&#7841;o preview &#273;&#7875; validate</text><polygon fill="#181818" points="1364,1076.9785,1374,1080.9785,1364,1084.9785,1368,1080.9785" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1370" y1="1080.9785" y2="1080.9785"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="1032" y="1060.9258">assignPatientToRooms</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="1032" y="1076.2363">validate c&#243; nh&#226;n s&#7921;</text><polygon fill="#181818" points="1676,1121.5996,1686,1125.5996,1676,1129.5996,1680,1125.5996" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1386" x2="1682" y1="1125.5996" y2="1125.5996"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="1393" y="1105.5469">SELECT work sessions</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="1393" y="1120.8574">for services</text><polygon fill="#181818" points="1397,1150.9102,1387,1154.9102,1397,1158.9102,1393,1154.9102" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1391" x2="1692" y1="1154.9102" y2="1154.9102"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="1403" y="1150.168">Work sessions</text><polygon fill="#181818" points="1036,1180.2207,1026,1184.2207,1036,1188.2207,1032,1184.2207" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1030" x2="1380" y1="1184.2207" y2="1184.2207"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1042" y="1179.4785">availableAssignments</text><path d="M10,1199.2207 L72,1199.2207 L72,1206.5313 L62,1216.5313 L10,1216.5313 L10,1199.2207 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="4358.6152" style="stroke:#000000;stroke-width:1.5;" width="1775" x="10" y="1199.2207"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="1212.7891">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="109" x="87" y="1211.8555">[Kh&#244;ng c&#243; nh&#226;n s&#250;]</text><polygon fill="#181818" points="758,1233.8418,748,1237.8418,758,1241.8418,754,1237.8418" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="752" x2="1014" y1="1237.8418" y2="1237.8418"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="764" y="1233.0996">Error kh&#244;ng c&#243; nh&#226;n s&#7921;</text><polygon fill="#181818" points="494,1263.1523,484,1267.1523,494,1271.1523,490,1267.1523" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="488" x2="736" y1="1267.1523" y2="1267.1523"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="500" y="1262.4102">400 Bad Request</text><polygon fill="#181818" points="107,1307.7734,97,1311.7734,107,1315.7734,103,1311.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="1311.7734" y2="1311.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="113" y="1291.7207">Hi&#7875;n th&#7883; l&#7895;i</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="113" y="1307.0313">ch&#432;a c&#243; nh&#226;n s&#7921; ph&#7909;c v&#7909;</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1785" y1="1320.7734" y2="1320.7734"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72" x="15" y="1331.4082">[C&#243; nh&#226;n s&#7921;]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="1356.0391" y2="1356.0391"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="1356.0391" y2="1369.0391"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="1369.0391" y2="1369.0391"/><polygon fill="#181818" points="1031,1365.0391,1021,1369.0391,1031,1373.0391,1027,1369.0391" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1027" y="1351.2969">Generate invoiceCode</text><polygon fill="#181818" points="1676,1394.3496,1686,1398.3496,1676,1402.3496,1680,1398.3496" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1682" y1="1398.3496" y2="1398.3496"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="1027" y="1393.6074">BEGIN TRANSACTION</text><polygon fill="#181818" points="1676,1500.2129,1686,1504.2129,1676,1508.2129,1680,1504.2129" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1682" y1="1504.2129" y2="1504.2129"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="1027" y="1422.918">INSERT INTO invoice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="1027" y="1438.2285">invoiceCode, patientProfileId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="1027" y="1453.5391">cashierId, totalAmount,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="1027" y="1468.8496">paymentMethod TRANSFER,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1027" y="1484.1602">isPaid false,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1027" y="1499.4707">paymentStatus PENDING</text><polygon fill="#181818" points="1031,1529.5234,1021,1533.5234,1031,1537.5234,1027,1533.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1687" y1="1533.5234" y2="1533.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="1037" y="1528.7813">Invoice created</text><polygon fill="#181818" points="1676,1574.1445,1686,1578.1445,1676,1582.1445,1680,1578.1445" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1682" y1="1578.1445" y2="1578.1445"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="1027" y="1558.0918">INSERT INTO invoiceDetail</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="1027" y="1573.4023">cho t&#7915;ng selectedService</text><polygon fill="#181818" points="1031,1603.4551,1021,1607.4551,1031,1611.4551,1027,1607.4551" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1687" y1="1607.4551" y2="1607.4551"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="1037" y="1602.7129">InvoiceDetails created</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="1636.7656" y2="1636.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="1636.7656" y2="1649.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="1649.7656" y2="1649.7656"/><polygon fill="#181818" points="1031,1645.7656,1021,1649.7656,1031,1653.7656,1027,1649.7656" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="1027" y="1632.0234">Generate numeric orderCode</text><polygon fill="#181818" points="1231,1721.0078,1241,1725.0078,1231,1729.0078,1235,1725.0078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1237" y1="1725.0078" y2="1725.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="1027" y="1674.334">createPaymentLink</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="1027" y="1689.6445">orderCode, amount, description,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="1027" y="1704.9551">returnUrl, cancelUrl,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="1027" y="1720.2656">buyer info, items, metadata</text><line style="stroke:#181818;stroke-width:1.0;" x1="1253" x2="1295" y1="1769.6289" y2="1769.6289"/><line style="stroke:#181818;stroke-width:1.0;" x1="1295" x2="1295" y1="1769.6289" y2="1782.6289"/><line style="stroke:#181818;stroke-width:1.0;" x1="1254" x2="1295" y1="1782.6289" y2="1782.6289"/><polygon fill="#181818" points="1264,1778.6289,1254,1782.6289,1264,1786.6289,1260,1782.6289" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="1260" y="1749.5762">T&#7841;o payment link</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="1260" y="1764.8867">v&#224; QR code</text><polygon fill="#181818" points="1031,1853.8711,1021,1857.8711,1031,1861.8711,1027,1857.8711" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1247" y1="1857.8711" y2="1857.8711"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="1037" y="1807.1973">PaymentLinkResult</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="1037" y="1822.5078">paymentUrl, qrCode,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="1037" y="1837.8184">transactionId, status,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="1037" y="1853.1289">expiredAt</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="1887.1816" y2="1887.1816"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="1887.1816" y2="1900.1816"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="1900.1816" y2="1900.1816"/><polygon fill="#181818" points="1031,1896.1816,1021,1900.1816,1031,1904.1816,1027,1900.1816" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="1027" y="1882.4395">Map PayOS status</text><polygon fill="#181818" points="1676,2017.3555,1686,2021.3555,1676,2025.3555,1680,2021.3555" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1682" y1="2021.3555" y2="2021.3555"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212" x="1027" y="1924.75">INSERT INTO paymentTransaction</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="1027" y="1940.0605">invoiceId, amount, currency VND,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="1027" y="1955.3711">status PENDING,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="1027" y="1970.6816">providerTransactionId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="1027" y="1985.9922">orderCode, paymentUrl,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="1027" y="2001.3027">qrCode, expiredAt,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1027" y="2016.6133">isVerified false</text><polygon fill="#181818" points="1031,2046.666,1021,2050.666,1031,2054.666,1027,2050.666" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1687" y1="2050.666" y2="2050.666"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="1037" y="2045.9238">Transaction created</text><polygon fill="#181818" points="1681,2075.9766,1691,2079.9766,1681,2083.9766,1685,2079.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1687" y1="2079.9766" y2="2079.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="1027" y="2075.2344">COMMIT TRANSACTION</text><polygon fill="#181818" points="753,2151.2188,743,2155.2188,753,2159.2188,749,2155.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="2155.2188" y2="2155.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="759" y="2104.5449">PaymentResult</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="759" y="2119.8555">invoiceCode, totalAmount,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="759" y="2135.166">paymentStatus PENDING,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254" x="759" y="2150.4766">transaction with paymentUrl and qrCode</text><polygon fill="#181818" points="489,2180.5293,479,2184.5293,489,2188.5293,485,2184.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="483" x2="741" y1="2184.5293" y2="2184.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="495" y="2179.7871">200 OK payment created</text><polygon fill="#181818" points="107,2225.1504,97,2229.1504,107,2233.1504,103,2229.1504" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="2229.1504" y2="2229.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="113" y="2209.0977">Hi&#7875;n th&#7883; m&#227; QR code</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="113" y="2224.4082">v&#224; h&#432;&#7899;ng d&#7851;n</text><polygon fill="#181818" points="289,2269.7715,299,2273.7715,289,2277.7715,293,2273.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="295" y1="2273.7715" y2="2273.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="103" y="2253.7188">H&#432;&#7899;ng d&#7851;n qu&#233;t QR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="103" y="2269.0293">&#273;&#7875; thanh to&#225;n</text><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="353" y1="2318.3926" y2="2318.3926"/><line style="stroke:#181818;stroke-width:1.0;" x1="353" x2="353" y1="2318.3926" y2="2331.3926"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="353" y1="2331.3926" y2="2331.3926"/><polygon fill="#181818" points="322,2327.3926,312,2331.3926,322,2335.3926,318,2331.3926" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="318" y="2298.3398">M&#7903; app ng&#226;n h&#224;ng</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="318" y="2313.6504">ho&#7863;c v&#237; &#273;i&#7879;n t&#7917;</text><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="353" y1="2360.7031" y2="2360.7031"/><line style="stroke:#181818;stroke-width:1.0;" x1="353" x2="353" y1="2360.7031" y2="2373.7031"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="353" y1="2373.7031" y2="2373.7031"/><polygon fill="#181818" points="322,2369.7031,312,2373.7031,322,2377.7031,318,2373.7031" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="318" y="2355.9609">Qu&#233;t m&#227; QR</text><polygon fill="#181818" points="1231,2414.3242,1241,2418.3242,1231,2422.3242,1235,2418.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="1237" y1="2418.3242" y2="2418.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="318" y="2398.2715">Thanh to&#225;n qua</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="318" y="2413.582">app ng&#226;n h&#224;ng/v&#237;</text><line style="stroke:#181818;stroke-width:1.0;" x1="1253" x2="1295" y1="2462.9453" y2="2462.9453"/><line style="stroke:#181818;stroke-width:1.0;" x1="1295" x2="1295" y1="2462.9453" y2="2475.9453"/><line style="stroke:#181818;stroke-width:1.0;" x1="1254" x2="1295" y1="2475.9453" y2="2475.9453"/><polygon fill="#181818" points="1264,2471.9453,1254,2475.9453,1264,2479.9453,1260,2475.9453" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="1260" y="2442.8926">X&#7917; l&#253; thanh to&#225;n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="1260" y="2458.2031">v&#7899;i ng&#226;n h&#224;ng</text><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="353" y1="2520.5664" y2="2520.5664"/><line style="stroke:#181818;stroke-width:1.0;" x1="353" x2="353" y1="2520.5664" y2="2533.5664"/><line style="stroke:#181818;stroke-width:1.0;" x1="312" x2="353" y1="2533.5664" y2="2533.5664"/><polygon fill="#181818" points="322,2529.5664,312,2533.5664,322,2537.5664,318,2533.5664" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="318" y="2500.5137">Nh&#7853;p PIN</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="318" y="2515.8242">ho&#7863;c x&#225;c th&#7921;c sinh tr&#7855;c</text><line style="stroke:#181818;stroke-width:1.0;" x1="311" x2="353" y1="2567.877" y2="2567.877"/><line style="stroke:#181818;stroke-width:1.0;" x1="353" x2="353" y1="2567.877" y2="2580.877"/><line style="stroke:#181818;stroke-width:1.0;" x1="306" x2="353" y1="2580.877" y2="2580.877"/><polygon fill="#181818" points="316,2576.877,306,2580.877,316,2584.877,312,2580.877" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="318" y="2563.1348">X&#225;c nh&#7853;n thanh to&#225;n</text><line style="stroke:#181818;stroke-width:1.0;" x1="1253" x2="1295" y1="2620.498" y2="2620.498"/><line style="stroke:#181818;stroke-width:1.0;" x1="1295" x2="1295" y1="2620.498" y2="2633.498"/><line style="stroke:#181818;stroke-width:1.0;" x1="1254" x2="1295" y1="2633.498" y2="2633.498"/><polygon fill="#181818" points="1264,2629.498,1254,2633.498,1264,2637.498,1260,2633.498" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1260" y="2600.4453">Nh&#7853;n x&#225;c nh&#7853;n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1260" y="2615.7559">t&#7915; ng&#226;n h&#224;ng</text><polygon fill="#181818" points="758,2674.1191,748,2678.1191,758,2682.1191,754,2678.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="752" x2="1242" y1="2678.1191" y2="2678.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="764" y="2658.0664">POST /invoice-payments/payos/webhook</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="764" y="2673.377">with signature and payload</text><polygon fill="#181818" points="1003,2718.7402,1013,2722.7402,1003,2726.7402,1007,2722.7402" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="747" x2="1009" y1="2722.7402" y2="2722.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="754" y="2702.6875">handlePayOsWebhook</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="754" y="2717.998">signature, payload</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="2752.0508" y2="2752.0508"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="2752.0508" y2="2765.0508"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="2765.0508" y2="2765.0508"/><polygon fill="#181818" points="1036,2761.0508,1026,2765.0508,1036,2769.0508,1032,2765.0508" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="1032" y="2747.3086">Parse payload JSON</text><line style="stroke:#181818;stroke-width:1.0;" x1="1025" x2="1067" y1="2809.6719" y2="2809.6719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067" x2="1067" y1="2809.6719" y2="2822.6719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026" x2="1067" y1="2822.6719" y2="2822.6719"/><polygon fill="#181818" points="1036,2818.6719,1026,2822.6719,1036,2826.6719,1032,2822.6719" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="1032" y="2789.6191">Extract signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="1032" y="2804.9297">from header or payload</text><path d="M20,2837.6719 L82,2837.6719 L82,2844.9824 L72,2854.9824 L20,2854.9824 L20,2837.6719 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="2713.1641" style="stroke:#000000;stroke-width:1.5;" width="1755" x="20" y="2837.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="2851.2402">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="117" x="97" y="2850.3066">[Kh&#244;ng c&#243; signature]</text><polygon fill="#181818" points="758,2887.6035,748,2891.6035,758,2895.6035,754,2891.6035" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="752" x2="1014" y1="2891.6035" y2="2891.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="764" y="2871.5508">Return success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="764" y="2886.8613">without processing</text><polygon fill="#181818" points="1236,2916.9141,1246,2920.9141,1236,2924.9141,1240,2920.9141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1242" y1="2920.9141" y2="2920.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="2916.1719">200 OK</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1775" y1="2929.9141" y2="2929.9141"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79" x="25" y="2940.5488">[C&#243; signature]</text><polygon fill="#181818" points="1236,2976.4902,1246,2980.4902,1236,2984.4902,1240,2980.4902" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1242" y1="2980.4902" y2="2980.4902"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1027" y="2960.4375">verifyWebhook</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1027" y="2975.748">signature, payload</text><polygon fill="#181818" points="1031,3021.1113,1021,3025.1113,1031,3029.1113,1027,3025.1113" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1247" y1="3025.1113" y2="3025.1113"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="1037" y="3005.0586">Verified result</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="1037" y="3020.3691">or false</text><path d="M30,3040.1113 L92,3040.1113 L92,3047.4219 L82,3057.4219 L30,3057.4219 L30,3040.1113 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="2503.7246" style="stroke:#000000;stroke-width:1.5;" width="1735" x="30" y="3040.1113"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="45" y="3053.6797">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="139" x="107" y="3052.7461">[Signature kh&#244;ng h&#7907;p l&#7879;]</text><polygon fill="#181818" points="753,3074.7324,743,3078.7324,753,3082.7324,749,3078.7324" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="3078.7324" y2="3078.7324"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="759" y="3073.9902">Error Invalid signature</text><polygon fill="#181818" points="1231,3104.043,1241,3108.043,1231,3112.043,1235,3108.043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1237" y1="3108.043" y2="3108.043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="749" y="3103.3008">400 Bad Request</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="30" x2="1765" y1="3147.043" y2="3147.043"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="100" x="35" y="3157.6777">[Signature h&#7907;p l&#7879;]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="3197.6191" y2="3197.6191"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="3197.6191" y2="3210.6191"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="3210.6191" y2="3210.6191"/><polygon fill="#181818" points="1031,3206.6191,1021,3210.6191,1031,3214.6191,1027,3210.6191" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="1027" y="3177.5664">Extract transactionId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179" x="1027" y="3192.877">and orderCode from payload</text><polygon fill="#181818" points="1676,3297.1719,1686,3301.1719,1676,3305.1719,1680,3301.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1682" y1="3301.1719" y2="3301.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177" x="1027" y="3235.1875">SELECT paymentTransaction</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="1027" y="3250.498">WHERE providerTransactionId</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="1027" y="3265.8086">OR orderCode</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="1027" y="3281.1191">INCLUDE invoice, invoiceDetails,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1027" y="3296.4297">patientProfile</text><polygon fill="#181818" points="1031,3326.4824,1021,3330.4824,1031,3334.4824,1027,3330.4824" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1692" y1="3330.4824" y2="3330.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1037" y="3325.7402">Transaction with invoice</text><path d="M631,3345.4824 L693,3345.4824 L693,3352.793 L683,3362.793 L631,3362.793 L631,3345.4824 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="283.75" style="stroke:#000000;stroke-width:1.5;" width="1114" x="631" y="3345.4824"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="646" y="3359.0508">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="163" x="708" y="3358.1172">[Transaction kh&#244;ng t&#236;m th&#7845;y]</text><polygon fill="#181818" points="1676,3395.4141,1686,3399.4141,1676,3403.4141,1680,3399.4141" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1682" y1="3399.4141" y2="3399.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="1027" y="3379.3613">Fallback lookup</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="1027" y="3394.6719">by amount and time window</text><polygon fill="#181818" points="1031,3424.7246,1021,3428.7246,1031,3432.7246,1027,3428.7246" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1692" y1="3428.7246" y2="3428.7246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="1037" y="3423.9824">Candidates</text><path d="M641,3443.7246 L703,3443.7246 L703,3451.0352 L693,3461.0352 L641,3461.0352 L641,3443.7246 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="178.5078" style="stroke:#000000;stroke-width:1.5;" width="664.5" x="641" y="3443.7246"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="656" y="3457.293">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126" x="718" y="3456.3594">[T&#236;m th&#7845;y 1 candidate]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="3482.3457" y2="3482.3457"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="3482.3457" y2="3495.3457"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="3495.3457" y2="3495.3457"/><polygon fill="#181818" points="1031,3491.3457,1021,3495.3457,1031,3499.3457,1027,3495.3457" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1027" y="3477.6035">Use fallback transaction</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="641" x2="1305.5" y1="3504.3457" y2="3504.3457"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="94" x="646" y="3514.9805">[Kh&#244;ng t&#236;m th&#7845;y]</text><polygon fill="#181818" points="753,3550.9219,743,3554.9219,753,3558.9219,749,3554.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="3554.9219" y2="3554.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="759" y="3534.8691">Return success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="759" y="3550.1797">without invoice update</text><polygon fill="#181818" points="1231,3580.2324,1241,3584.2324,1231,3588.2324,1235,3584.2324" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1237" y1="3584.2324" y2="3584.2324"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="3579.4902">200 OK</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="3672.8535" y2="3672.8535"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="3672.8535" y2="3685.8535"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="3685.8535" y2="3685.8535"/><polygon fill="#181818" points="1031,3681.8535,1021,3685.8535,1031,3689.8535,1027,3685.8535" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="1027" y="3652.8008">Map status</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="1027" y="3668.1113">from payload</text><polygon fill="#181818" points="1676,3711.1641,1686,3715.1641,1676,3719.1641,1680,3715.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1682" y1="3715.1641" y2="3715.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="1027" y="3710.4219">BEGIN TRANSACTION</text><polygon fill="#181818" points="1676,3832.3379,1686,3836.3379,1676,3840.3379,1680,3836.3379" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1682" y1="3836.3379" y2="3836.3379"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="1027" y="3739.7324">UPDATE paymentTransaction</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1027" y="3755.043">status, paidAt,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="1027" y="3770.3535">providerTransactionId,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="1027" y="3785.6641">orderCode, isVerified true,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="1027" y="3800.9746">lastWebhookPayload,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="1027" y="3816.2852">lastWebhookStatus,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="1027" y="3831.5957">lastWebhookAt</text><polygon fill="#181818" points="1031,3861.6484,1021,3865.6484,1031,3869.6484,1027,3865.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1687" y1="3865.6484" y2="3865.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="1037" y="3860.9063">Transaction updated</text><path d="M40,3880.6484 L102,3880.6484 L102,3887.959 L92,3897.959 L40,3897.959 L40,3880.6484 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1656.1875" style="stroke:#000000;stroke-width:1.5;" width="1715" x="40" y="3880.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="55" y="3894.2168">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128" x="117" y="3893.2832">[Status is SUCCEEDED]</text><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1062" y1="3934.5801" y2="3934.5801"/><line style="stroke:#181818;stroke-width:1.0;" x1="1062" x2="1062" y1="3934.5801" y2="3947.5801"/><line style="stroke:#181818;stroke-width:1.0;" x1="1021" x2="1062" y1="3947.5801" y2="3947.5801"/><polygon fill="#181818" points="1031,3943.5801,1021,3947.5801,1031,3951.5801,1027,3947.5801" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1027" y="3914.5273">Check if invoice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="1027" y="3929.8379">already isPaid</text><path d="M50,3962.5801 L112,3962.5801 L112,3969.8906 L102,3979.8906 L50,3979.8906 L50,3962.5801 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1167.6191" style="stroke:#000000;stroke-width:1.5;" width="1695" x="50" y="3962.5801"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="65" y="3976.1484">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="104" x="127" y="3975.2148">[Invoice &#273;&#227; isPaid]</text><polygon fill="#181818" points="1681,3997.2012,1691,4001.2012,1681,4005.2012,1685,4001.2012" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1687" y1="4001.2012" y2="4001.2012"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="1027" y="3996.459">COMMIT TRANSACTION</text><line style="stroke:#181818;stroke-width:1.0;" x1="1502" x2="1492" y1="4030.5117" y2="4026.5117"/><line style="stroke:#181818;stroke-width:1.0;" x1="1502" x2="1492" y1="4030.5117" y2="4034.5117"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1503" y1="4030.5117" y2="4030.5117"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="1027" y="4025.7695">notifyInvoicePaymentSuccess</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="489" y1="4075.1328" y2="4071.1328"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="489" y1="4075.1328" y2="4079.1328"/><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="1503" y1="4075.1328" y2="4075.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="495" y="4055.0801">WebSocket notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="495" y="4070.3906">thanh to&#225;n th&#224;nh c&#244;ng</text><line style="stroke:#181818;stroke-width:1.0;" x1="1514" x2="1556" y1="4109.4434" y2="4109.4434"/><line style="stroke:#181818;stroke-width:1.0;" x1="1556" x2="1556" y1="4109.4434" y2="4122.4434"/><line style="stroke:#181818;stroke-width:1.0;" x1="1509" x2="1556" y1="4122.4434" y2="4122.4434"/><polygon fill="#181818" points="1519,4118.4434,1509,4122.4434,1519,4126.4434,1515,4122.4434" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1521" y="4104.7012">Broadcast to clinic rooms</text><polygon fill="#181818" points="753,4158.0645,743,4162.0645,753,4166.0645,749,4162.0645" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="4162.0645" y2="4162.0645"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="759" y="4142.0117">Return success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="759" y="4157.3223">with invoiceCode</text><polygon fill="#181818" points="1231,4187.375,1241,4191.375,1231,4195.375,1235,4191.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1237" y1="4191.375" y2="4191.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="4186.6328">200 OK</text><polygon fill="#181818" points="107,4261.9961,97,4265.9961,107,4269.9961,103,4265.9961" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="4265.9961" y2="4265.9961"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="113" y="4245.9434">Hi&#7875;n th&#7883; notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="113" y="4261.2539">thanh to&#225;n th&#224;nh c&#244;ng</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="50" x2="1745" y1="4274.9961" y2="4274.9961"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="118" x="55" y="4285.6309">[Invoice ch&#432;a isPaid]</text><polygon fill="#181818" points="1681,4367.5039,1691,4371.5039,1681,4375.5039,1685,4371.5039" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1687" y1="4371.5039" y2="4371.5039"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1027" y="4305.5195">UPDATE invoice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="1027" y="4320.8301">set isPaid true,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="1027" y="4336.1406">paymentStatus PAID,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="1027" y="4351.4512">amountPaid, changeAmount 0,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="1027" y="4366.7617">paidAt now</text><polygon fill="#181818" points="1031,4396.8145,1021,4400.8145,1031,4404.8145,1027,4400.8145" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1692" y1="4400.8145" y2="4400.8145"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="1037" y="4396.0723">Invoice updated</text><polygon fill="#181818" points="1681,4441.4355,1691,4445.4355,1681,4449.4355,1685,4445.4355" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1687" y1="4445.4355" y2="4445.4355"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="1027" y="4425.3828">UPDATE prescription</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="1027" y="4440.6934">status PAID</text><polygon fill="#181818" points="1031,4470.7461,1021,4474.7461,1031,4478.7461,1027,4474.7461" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1692" y1="4474.7461" y2="4474.7461"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="1037" y="4470.0039">Prescription updated</text><polygon fill="#181818" points="1681,4500.0566,1691,4504.0566,1681,4508.0566,1685,4504.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1687" y1="4504.0566" y2="4504.0566"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="1027" y="4499.3145">COMMIT TRANSACTION</text><polygon fill="#181818" points="1364,4544.6777,1374,4548.6777,1364,4552.6777,1368,4548.6777" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1370" y1="4548.6777" y2="4548.6777"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="1027" y="4528.625">assignPatientToRooms</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="1027" y="4543.9355">t&#7841;o routing assignments</text><polygon fill="#181818" points="1676,4589.2988,1686,4593.2988,1676,4597.2988,1680,4593.2988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1386" x2="1682" y1="4593.2988" y2="4593.2988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="1393" y="4573.2461">INSERT routing assignments</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1393" y="4588.5566">for each service</text><polygon fill="#181818" points="1397,4618.6094,1387,4622.6094,1397,4626.6094,1393,4622.6094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1391" x2="1692" y1="4622.6094" y2="4622.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="1403" y="4617.8672">Assignments created</text><polygon fill="#181818" points="1031,4647.9199,1021,4651.9199,1031,4655.9199,1027,4651.9199" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1025" x2="1380" y1="4651.9199" y2="4651.9199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="1037" y="4647.1777">routingAssignments</text><line style="stroke:#181818;stroke-width:1.0;" x1="1502" x2="1492" y1="4696.541" y2="4692.541"/><line style="stroke:#181818;stroke-width:1.0;" x1="1502" x2="1492" y1="4696.541" y2="4700.541"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1503" y1="4696.541" y2="4696.541"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="1027" y="4676.4883">notifyInvoicePaymentSuccess</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="1027" y="4691.7988">and routing created</text><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="489" y1="4741.1621" y2="4737.1621"/><line style="stroke:#181818;stroke-width:1.0;" x1="479" x2="489" y1="4741.1621" y2="4745.1621"/><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="1503" y1="4741.1621" y2="4741.1621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="495" y="4721.1094">WebSocket notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="495" y="4736.4199">thanh to&#225;n th&#224;nh c&#244;ng</text><line style="stroke:#181818;stroke-width:1.0;" x1="1514" x2="1556" y1="4790.7832" y2="4790.7832"/><line style="stroke:#181818;stroke-width:1.0;" x1="1556" x2="1556" y1="4790.7832" y2="4803.7832"/><line style="stroke:#181818;stroke-width:1.0;" x1="1509" x2="1556" y1="4803.7832" y2="4803.7832"/><polygon fill="#181818" points="1519,4799.7832,1509,4803.7832,1519,4807.7832,1515,4803.7832" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="1521" y="4770.7305">Broadcast to clinic rooms</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99" x="1521" y="4786.041">v&#7899;i routing info</text><polygon fill="#181818" points="753,4839.4043,743,4843.4043,753,4847.4043,749,4843.4043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="4843.4043" y2="4843.4043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="759" y="4823.3516">Return success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166" x="759" y="4838.6621">with invoiceCode and data</text><polygon fill="#181818" points="1231,4868.7148,1241,4872.7148,1231,4876.7148,1235,4872.7148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1237" y1="4872.7148" y2="4872.7148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="4867.9727">200 OK</text><polygon fill="#181818" points="107,4943.3359,97,4947.3359,107,4951.3359,103,4947.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="4947.3359" y2="4947.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127" x="113" y="4927.2832">Hi&#7875;n th&#7883; notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="113" y="4942.5938">thanh to&#225;n th&#224;nh c&#244;ng</text><polygon fill="#181818" points="461,4972.6465,471,4976.6465,461,4980.6465,465,4976.6465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="467" y1="4976.6465" y2="4976.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="103" y="4971.9043">In h&#243;a &#273;&#417;n</text><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="525" y1="5005.957" y2="5005.957"/><line style="stroke:#181818;stroke-width:1.0;" x1="525" x2="525" y1="5005.957" y2="5018.957"/><line style="stroke:#181818;stroke-width:1.0;" x1="484" x2="525" y1="5018.957" y2="5018.957"/><polygon fill="#181818" points="494,5014.957,484,5018.957,494,5022.957,490,5018.957" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="490" y="5001.2148">Generate invoice PDF</text><polygon fill="#181818" points="107,5044.2676,97,5048.2676,107,5052.2676,103,5048.2676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="5048.2676" y2="5048.2676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="113" y="5043.5254">H&#243;a &#273;&#417;n in ra</text><polygon fill="#181818" points="289,5073.5781,299,5077.5781,289,5081.5781,293,5077.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="295" y1="5077.5781" y2="5077.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="103" y="5072.8359">Trao h&#243;a &#273;&#417;n</text><polygon fill="#181818" points="294,5118.1992,304,5122.1992,294,5126.1992,298,5122.1992" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="96" x2="300" y1="5122.1992" y2="5122.1992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="103" y="5102.1465">H&#432;&#7899;ng d&#7851;n &#273;&#7871;n ph&#242;ng kh&#225;m</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="103" y="5117.457">theo routing assignment</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="40" x2="1755" y1="5138.1992" y2="5138.1992"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="186" x="45" y="5148.834">[Status is CANCELLED or FAILED]</text><polygon fill="#181818" points="1681,5169.4648,1691,5173.4648,1681,5177.4648,1685,5173.4648" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1687" y1="5173.4648" y2="5173.4648"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="1027" y="5168.7227">COMMIT TRANSACTION</text><polygon fill="#181818" points="753,5214.0859,743,5218.0859,753,5222.0859,749,5218.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="5218.0859" y2="5218.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="759" y="5198.0332">Return success</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="759" y="5213.3438">with status</text><polygon fill="#181818" points="1231,5243.3965,1241,5247.3965,1231,5251.3965,1235,5247.3965" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1237" y1="5247.3965" y2="5247.3965"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="5242.6543">200 OK</text><line style="stroke:#181818;stroke-width:1.0;" x1="1502" x2="1492" y1="5306.707" y2="5302.707"/><line style="stroke:#181818;stroke-width:1.0;" x1="1502" x2="1492" y1="5306.707" y2="5310.707"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1503" y1="5306.707" y2="5306.707"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="1027" y="5301.9648">Notify payment failed</text><line style="stroke:#181818;stroke-width:1.0;" x1="484" x2="494" y1="5351.3281" y2="5347.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="484" x2="494" y1="5351.3281" y2="5355.3281"/><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="1508" y1="5351.3281" y2="5351.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="500" y="5331.2754">WebSocket notification</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="500" y="5346.5859">thanh to&#225;n th&#7845;t b&#7841;i</text><polygon fill="#181818" points="107,5391.9492,97,5395.9492,107,5399.9492,103,5395.9492" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="101" x2="477" y1="5395.9492" y2="5395.9492"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="113" y="5375.8965">Hi&#7875;n th&#7883; thanh to&#225;n</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="113" y="5391.207">th&#7845;t b&#7841;i ho&#7863;c h&#7911;y</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="40" x2="1755" y1="5404.9492" y2="5404.9492"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="211" x="45" y="5415.584">[Status kh&#225;c (PENDING/PROCESSING)]</text><polygon fill="#181818" points="1681,5436.2148,1691,5440.2148,1681,5444.2148,1685,5440.2148" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1020" x2="1687" y1="5440.2148" y2="5440.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="1027" y="5435.4727">COMMIT TRANSACTION</text><polygon fill="#181818" points="753,5465.5254,743,5469.5254,753,5473.5254,749,5469.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="747" x2="1019" y1="5469.5254" y2="5469.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="759" y="5464.7832">Return success</text><polygon fill="#181818" points="1231,5494.8359,1241,5498.8359,1231,5502.8359,1235,5498.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="742" x2="1237" y1="5498.8359" y2="5498.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="749" y="5494.0938">200 OK</text><!--SRC=[xLhDRnl75R_phnZub00qv1OzwH208ccRiKHH96Mc02-ZtP5seUKilJkan6EHGr04HU93qKCFZHeOGPiARPe01KGKET38_y7_f6y-TZYxE_iXkIaIe09iaRipx_lztfitmWuB8_Hex2qGlTZycJv2E4Pj77i-YHfOlZpOhZ-X7g9Uydw0cKyeQpJEmWLrSRGo2A3JdbXpsciu8MLH6A17FReCVOSCy6e6szhoSK0YoKn_RS1BdwsowqSaMi8tiLXzrYjXoN5iBk0FHlhrC5mmdrwO2zGZlMH2paQXSqbIR2QZXeiPFiCn0HvXp2uYCZev5Eyw1us6CX1w_45YYttqwyrV5yZPtdsrG7FFtzvz3z-yxVgtwEthxVfJwd5h-alCY3QV-isfA8BxwEtdF_m35n1mIOw4ASbfRn-TB3P_OMYs-R9A1d1FuxGdM6lxxwF1yMYCzdnf_iTpQVzuBtOmdT9vH68dykVC3saxTCcEcE72nkup9wwCkeyuYO51u3sNXU_lA2H-RQWFV6_dO1-DkeVTzXYPhATqyhmxxAAiE5FQwxSFJplmHXfd48NdVa2Qo0rv73THB6d7ExRWoyu1UcmAQWg9U12OPkU-DoJKcrxYm7VvWfXXjeWH3Hbgj_hjxk5XjsDioPhRuDKX3Fj136REI9z8tGIDXVI6FDfifjLLAFpooHDq_29b9kHA9YO9qtSy8CnWVEvlrnzJn224FWLR00R4cnl7GovyXr_BxVhDb2utNw0BVtE3s7RzDRqmNvfyUC05OJX7RQ3sEsekGvp4DPbn2hy72WpO_eOs4FnamdkykNMylRFj-ZF4-CSKCxxUPCU_Y_zgnpdOQkcJgtoeSoy4n674LHRlkN6Qds56pRSW5Po8m0u5RWF9KgP3YcBYMqtE5dY7O4idArnSkBoD0sSHSEeiP3XepG2_cOL3rbmfMQSqow-P8sU9KQjPSh7A6MGfs6nR6ghvE4e78g5k3ZbLM8w7hVxeQNSeOf9wsxity6nxTnCYR_Cj1XpzuOO-44Mbt-i5LvFZWDXtH9WNkbekU14HjeZeQHGq4O2gGmBuM0UBJH4FGR4LR1ScwBaYTz67at4XVgU2jWPuwutIUCgpeWvzZ9OABbCxL67UXneR-nTKLRXnE0p36S1YiWSvcszbAuBYxVgRdHH9OM-e3vaISXL6bs1ee1rI87SEZKrPFT3IJCnzsLgWMPaQuoLWB3uBI4ie8fnlRjI2ue2X5zxcEo1WABMvAyt5RXI1w9UvRTmM1TdrAyYk0-oY8Ncr836hpfzWk_w3FwMEntkHD0_eAm1hdHtYfZEhF7Cjg402QB7QUJLieVICK1BnpIgrH1EINSrTVj1zrklBb6crnxtZVXfPkUSikthzKNSuXb_ZuuJ3b1gicfd6ekT2CkeKIc5WMVhwyG3xBZh7eFbktKWs3eDklzFhFvFoPLiJrHQhN7JhAY4x2-xECAdH6S0fPQSQaqAkUVVGnOn0guB2o2MHrKcYIy-0og5FBwTKxsaYB4q9KQFXiW3zuF7POWKHxqDUDv7Fo0ngqWm45mrSoldoW22UYO-6E0ggf3We4FBmCd0oH8xMGcrAjOmx1OOaNWHCUrM8-KhgCuLKm3JcWeIKnuli5U4vkPxx4N5RkT9fo6ep-16UAt4agSg0K5ADTtBe0ES29GPt5b54gBD2B_iT42zEXIOFsIXS-k2cSKgVbEyC_QTK6G1fFKKMl8GOEVU9oWHx21eSIgE-VNnqr1ldCZw3rZLQdCH_gRIt9lOeQnN3k-ZAPvvX0uIfgyAW20UhEYCLb8aHYd6s6jtvwL25j8nlWFdj-e-YTR_xsjOlPLjnVUPzdjg9NedJvybmIcMTPnu_Cx1mSqEpIQYEhpAZz35O4pxQhl-4y7okPWhUvWjwCQLUkBtx5zIUpIqq4ZwVId10koqcipiEdmmjgsJMxuG41V2KPjZk0RlQ4F8HY8E2pRzDrS78O2JVf5aiSHzQpbj8wrvVgtiDPoxXkc-Wq_SvrMXxztUdcCP7V0FlNMzfpWMs6O9DaRxSVhqZ1H7EcqIB5cfddGCMNeNntXKvyy8Gm5Ma2U-H89KY8h84LWGXTWiFLsK7Ar3L3OWO2KqI5ffwqquwbNysa1tW23eKjHTzE09eALpRlGOGSDXE9UWpet26F8816Q4UQXca4Ed-J-yIByl0QYXg88eN3dIliRGZD9NGPOVy0Myk4n8PI57UbQYY5nLtRDQ2P7bX7l9qIrUYa9PaoQl0ginTUhEbykeQ4YdS1XFBSb8el7x3hJ_IiQSQQiYoB-Uy__r4hwjkndloS6BHjzW3jfvSIsOtTxMdIhrLuZ7jjPqzgWnXYVfKUmCm2jciEm8ayY3dKaifJoP-bbObcVjPkeyfFHxkkEr6WGg1ckbUM1wlpLxURdze6ipdPTs9W3B5fCZaIGzYHg19GyKWs_njnl4UJkYfvHPZFSL1S8QTInH0zYpcq0QlL1Sdm9JvCmAIKJUyob4gKjAcQ1k8YSDtd5jQefvMSQSF-WLlsYMjtDgY-3g5m3nF53M2B4T0XF2BQYC-15gLQz5YNYXxBQYjcUVryxrMtjV8Vsr4wZQotoiXW9z4v351LRmwcMu_fTlYiupAwQ3J6dUjUA4EMF3EbuUE6WSNurp2eWK_jGKuPge-3QHMwOUZv1XdF6knHctaa17bvg51dJ3y68rEs-rkjzFjDEhaIziZa2Z- -Mw8WGCuDhWh94SFzYnDXWjlNqEth1PMP6Z9oUkUC94c_06QGEBGa45daBaAb6bPdaqJU-nFHe8qFrJfEp_9n7Um31YZMGRiW1RNWyRiEwERoj4JaXv441GEU1-s8YVmgU-WY4yjgqmn6JNU6PnImx2QEVzpWAzobchKcFqfFVU-Ww_pGyvStT73EJ4qhPz02hzqhiOGbMf4g00eCt1ezVXGHbPvlgm9B36z8790WPw87HpmGE4hkncB1ejMAAh0tTJDRBoJiHxdr6thVTZ_6BXJTGN1n7mmKZD_R4ptIsDLp_jjgpAN5MfQP-4Xhon07I-vjoZdQcdh30TeJOqxYjHmwG66j5w6A4rQ5SQoNO-yOv6G9v34acMw_GGhHp8pIiJdW-t_TJKHHmWzGFz_MVcnouhTVEbRwXurxw4VgekabRrEGuFEqthgQmbWAuhmVq4tFRk4pZYihM9gWbc7UcPU_VRrzkvxYkRUvf_m38xVDpFkGM83-Uhmah9KdgV4d4MtzlglXFXqy6chTrZUvDSiVHLeVIz4K7TB3yd_U-L-HTxNo_dgVCzMaBwe8Fg2vHpxWQLCb9M8UvU7xTqRXiwWcV0RzuJpikGk_uiOyph2b02fImPOzTMgKR_lDSEO9uw3tbDNONk3uN6xEnh1n_T_Ag7ySutU8Y19FlFV_Dz_0000]--></g></svg>