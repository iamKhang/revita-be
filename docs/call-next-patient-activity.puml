@startuml call-next-patient-activity
title Luồng hoạt động: Gọi bệnh nhân tiếp theo (Call Next Patient)

skinparam swimlane {
  BorderColor black
  BorderThickness 2
}

skinparam PartitionBorderColor black
skinparam PartitionBorderThickness 2

|Nhân viên quầy|
start
:Nhấn nút\n"Gọi bệnh nhân tiếp theo";

|Hệ thống|
:Nhận yêu cầu gọi bệnh nhân;

:Kiểm tra bệnh nhân\nđang phục vụ;

if (Có bệnh nhân\nđang phục vụ?) then (yes)
  :Đánh dấu bệnh nhân\nđã được phục vụ;
  
  :Thông báo\nđã phục vụ xong;
endif

:Lấy danh sách\nbệnh nhân chờ;

if (Không có bệnh nhân chờ?) then (yes)
  |Nhân viên quầy|
  #pink:Hiển thị:\n"Không có bệnh nhân";
  :Xác nhận;
  stop
else (no)
  |Hệ thống|
  :Lấy bệnh nhân\nưu tiên cao nhất;
  
  :Chuyển sang trạng thái\nĐANG CHUẨN BỊ;
  
  :Thông báo đang chuẩn bị\nphục vụ bệnh nhân;
  
  :Chuyển sang trạng thái\nĐANG PHỤC VỤ;
  
  :Lưu lịch sử\nphục vụ (nếu cần);
  
  :Chọn bệnh nhân\nTIẾP THEO;
  
  :Thông báo bệnh nhân tiếp theo;
  
  :Thông báo thay đổi\nvị trí trong hàng chờ;
  
  :Tạo thông tin\nphản hồi;
  
  |Nhân viên quầy|
  :Nhận thông tin:\n- Bệnh nhân đang phục vụ\n- Bệnh nhân tiếp theo\n- Danh sách chờ;
  
  :Hiển thị trên màn hình\nquầy tiếp nhận;
endif

stop

@enduml

